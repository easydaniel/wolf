(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{177:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},178:function(e,a,t){},202:function(e,a,t){e.exports=t.p+"static/media/ballot-box-with-ballot.62b0527e.png"},321:function(e,a,t){e.exports=t(367)},367:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(26),i=t.n(l),c=t(8),o=t(14),m=(t(177),t(178),t(15)),u=t(442),d=t(446),s=t(285),f=t(452),b=t(425),g=t(439),E=t(170),p=t(436),h=t(437),v=t(372),O=t(411),j=t(412);t(410);Object(O.a)((function(e){return{footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6,0)}}}));var y=t(435),C=t(441),S=t(27),k=t(128),I=t(292),x=t(11),w=t(31),$=t(131),D=t(3),V=t(448),T=t(432),W=t(413),P=t(440),z=t(419),N=t(421),R=t(417),B=t(422),L=t(420),F=t(416),M=t(297),U=t(268),G=t.n(U),H=t(267),A=t.n(H),q=t(418),Y=t(451),J=t(415),Q=t(414),K=t(202),X=t.n(K);function Z(){var e=Object(o.a)(["\n  mutation UpdatePass($id: Int!, $pass: String!) {\n    updatePass(id: $id, pass: $pass)\n  }\n"]);return Z=function(){return e},e}function _(){var e=Object(o.a)(["\n  mutation ResetChiefCandidate($id: Int!) {\n    resetChiefCaniddate(id: $id)\n  }\n"]);return _=function(){return e},e}function ee(){var e=Object(o.a)(["\n  mutation SetVoteWeightedId($id: Int!) {\n    setVoteWeightedId(id: $id)\n  }\n"]);return ee=function(){return e},e}function ae(){var e=Object(o.a)(["\n  mutation SetChiefId($id: Int!) {\n    setChiefId(id: $id)\n  }\n"]);return ae=function(){return e},e}function te(){var e=Object(o.a)(["\n  mutation SetDieStatus($id: Int!) {\n    setDieStatus(id: $id)\n  }\n"]);return te=function(){return e},e}var ne=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:750},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}})),re=Object(m.a)(te()),le=Object(m.a)(ae()),ie=Object(m.a)(ee()),ce=Object(m.a)(_()),oe=Object(m.a)(Z());function me(e){var a,t=r.a.useState(""),n=Object(c.a)(t,2),l=n[0],i=n[1],o=Object(f.a)(oe,{onError:function(){i("Access Error!"),console.log("error")},onCompleted:function(){b(!1)}}),m=Object(c.a)(o,1)[0],u=r.a.useState(!1),d=Object(c.a)(u,2),s=d[0],b=d[1],g=r.a.useState(""),E=Object(c.a)(g,2),p=E[0],h=E[1],v=function(){b(!1)};return r.a.createElement("div",null,r.a.createElement(W.a,(a={variant:"outlined",color:"primary",onClick:function(){b(!0)}},Object(x.a)(a,"color","secondary"),Object(x.a)(a,"size","small"),a),"\u91cd\u7f6e"),r.a.createElement(Y.a,{open:s,onClose:v,"aria-labelledby":"form-dialog-title"},r.a.createElement(Q.a,null,r.a.createElement(P.a,{autoFocus:!0,margin:"dense",id:"name",label:"PWD",type:"email",fullWidth:!0,onChange:function(e){h(e.target.value)},helperText:l,error:""!==l,onClick:function(){i("")}})),r.a.createElement(J.a,null,r.a.createElement(W.a,{onClick:v,color:"primary",size:"small"},"Cancel"),r.a.createElement(W.a,{onClick:function(){m({variables:{id:e.id,pass:p}})},color:"secondary",size:"small"},"Submit"))))}function ue(e){var a=e.isCandidate,t=e.isDropout;return r.a.createElement(r.a.Fragment,null,!0===a&&!1===t&&r.a.createElement("img",{src:X.a,style:{height:30,width:30}}),!0===a&&!0===t&&r.a.createElement("span",{span:!0,"aria-label":"paw",style:{fontSize:30,marginLeft:5}},"\ud83d\udeab"),null===a&&r.a.createElement("span",{span:!0,"aria-label":"paw",style:{fontSize:30,marginLeft:5}},"\ud83e\udd14"))}function de(e){var a,t=Object(f.a)(re),n=Object(c.a)(t,1)[0],l=Object(f.a)(le),i=Object(c.a)(l,1)[0],o=Object(f.a)(ie),m=Object(c.a)(o,1)[0],u=Object(f.a)(ce),d=Object(c.a)(u,1)[0],s=e.row,b=r.a.useState(!1),g=Object(c.a)(b,2),p=g[0],h=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,null,r.a.createElement(R.a,null,r.a.createElement(v.a,{"aria-label":"expand row",size:"small",onClick:function(){return h(!p)}},p?r.a.createElement(A.a,null):r.a.createElement(G.a,null))),r.a.createElement(R.a,null,0===s.id||e.chiefId>=0?r.a.createElement(V.a,{onChange:function(e){i({variables:{id:s.id}})},checked:s.isChief,color:"secondary",inputProps:{"aria-label":"secondary checkbox"}}):s.chiefVoteState&&r.a.createElement(ue,{isCandidate:s.chiefVoteState.isCandidate,isDropout:s.chiefVoteState.isDropout})),r.a.createElement(R.a,null,s.id?r.a.createElement(V.a,{onChange:function(e){n({variables:{id:s.id}})},checked:s.isDie,color:"secondary",inputProps:{"aria-label":"secondary checkbox"}}):null),r.a.createElement(R.a,null,r.a.createElement(V.a,{onChange:function(e){m({variables:{id:s.id}})},checked:s.id===e.voteWeightedId,color:"primary",inputProps:{"aria-label":"secondary checkbox"}})),r.a.createElement(R.a,{component:"th",scope:"row"},s.id),r.a.createElement(R.a,{align:"right"},s.name),r.a.createElement(R.a,{align:"right"},s.roleName),r.a.createElement(R.a,{align:"right"},s.votedNumber),r.a.createElement(R.a,{align:"right"},s.chiefVote.toString()),r.a.createElement(R.a,{align:"right"},s.vote.toString()),r.a.createElement(R.a,{align:"right"},r.a.createElement("span",{style:{color:s.isEmpty?"gray":s.isVoteFinish?"lightgreen":"orange",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf"))),r.a.createElement(F.a,null,r.a.createElement(q.a,{in:p,timeout:"auto",unmountOnExit:!0},r.a.createElement(C.a,{margin:1},r.a.createElement(E.a,{variant:"h6",gutterBottom:!0,component:"div"},"\u9032\u968e"),r.a.createElement(z.a,{size:"small","aria-label":"purchases"},r.a.createElement(L.a,null,r.a.createElement(F.a,null,r.a.createElement(R.a,{align:"center"},"\u5bc6\u78bc "),r.a.createElement(R.a,{align:"center"},"\u4e0a\u8b66 "),r.a.createElement(R.a,{align:"center"},"\u9000\u6c34 "))),r.a.createElement(N.a,null,r.a.createElement(F.a,null,r.a.createElement(R.a,{align:"center"},s.pass||""),r.a.createElement(R.a,{align:"center"},s.chiefVoteState.isCandidate?"Y":"N"),r.a.createElement(R.a,{align:"center"},s.chiefVoteState.isDropout?"Y":"N")),r.a.createElement(F.a,null,r.a.createElement(R.a,{align:"center"},r.a.createElement(me,{id:s.id})),r.a.createElement(R.a,{align:"center",colSpan:2},r.a.createElement(W.a,(a={variant:"outlined",color:"primary",onClick:function(){d({variables:{id:s.id}})}},Object(x.a)(a,"color","secondary"),Object(x.a)(a,"size","small"),a),"\u91cd\u7f6e")))))))))}function se(e){var a=ne();return r.a.createElement(B.a,{component:M.a},r.a.createElement(z.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(L.a,null,r.a.createElement(F.a,null,r.a.createElement(R.a,null),r.a.createElement(R.a,null,"\u8b66\u9577"),r.a.createElement(R.a,null,"\u6b7b\u4ea1"),r.a.createElement(R.a,null,"\u653e\u9010\u52a0\u6b0a"),r.a.createElement(R.a,null,"ID"),r.a.createElement(R.a,{align:"left"},"\u73a9\u5bb6"),r.a.createElement(R.a,{align:"right"},"\u89d2\u8272"),r.a.createElement(R.a,{align:"right"},"\u6295\u7968"),r.a.createElement(R.a,{align:"center"},"\u8b66\u9577"),r.a.createElement(R.a,{align:"center"},"\u653e\u9010"),r.a.createElement(R.a,{align:"right"},"\u4e0a\u7dda"))),r.a.createElement(N.a,null,e.data.map((function(a){return r.a.createElement(de,Object.assign({},e,{row:a,key:a.id}))})))))}function fe(){var e=Object(o.a)(["\nmutation SetVoteWeightedId($id: Int!) {\n  setVoteWeightedId(id: $id)\n}\n"]);return fe=function(){return e},e}function be(){var e=Object(o.a)(["\n  mutation SetChiefId($id: Int!) {\n    setChiefId(id: $id)\n  }\n"]);return be=function(){return e},e}function ge(){var e=Object(o.a)(["\n  mutation SetDieStatus($id: Int!) {\n    setDieStatus(id: $id)\n  }\n"]);return ge=function(){return e},e}function Ee(){var e=Object(o.a)(["\n  mutation SetDarkDieStatus($targets: [Int]!) {\n    setDarkDieStatus(targets: $targets)\n  }\n"]);return Ee=function(){return e},e}var pe=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:750},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}})),he=Object(m.a)(Ee()),ve=(Object(m.a)(ge()),Object(m.a)(be())),Oe=Object(m.a)(fe());function je(e){var a=pe(),t=Object(n.useState)(new Set),l=Object(c.a)(t,2),i=l[0],o=l[1],m=Object(f.a)(he),u=Object(c.a)(m,1)[0],d=Object(f.a)(ve),s=Object(c.a)(d,1)[0],b=Object(f.a)(Oe),g=Object(c.a)(b,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{display:"flex"},r.a.createElement(W.a,{variant:"contained",color:"secondary",onClick:function(){u({variables:{targets:Object(w.a)(i)}})}},"\u78ba\u8a8d\u6b7b\u4ea1")),r.a.createElement(B.a,{component:M.a},r.a.createElement(z.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(L.a,null,r.a.createElement(F.a,null,r.a.createElement(R.a,null,"\u8b66\u9577"),r.a.createElement(R.a,null,"\u6b7b\u4ea1"),r.a.createElement(R.a,null,"\u653e\u9010\u52a0\u6b0a"),r.a.createElement(R.a,null,"ID"),r.a.createElement(R.a,{align:"left"},"\u73a9\u5bb6"),r.a.createElement(R.a,{align:"right"},"\u89d2\u8272"),r.a.createElement(R.a,{align:"right"},"\u6295\u7968"),r.a.createElement(R.a,{align:"center"},"\u8b66\u9577"),r.a.createElement(R.a,{align:"center"},"\u653e\u9010"),r.a.createElement(R.a,{align:"right"},"\u4e0a\u7dda"))),r.a.createElement(N.a,null,e.data.map((function(a){return r.a.createElement(F.a,{key:a.id},r.a.createElement(R.a,null,r.a.createElement(V.a,{disabled:!0,onChange:function(e){s({variables:{id:a.id}})},checked:a.id===e.chiefId,color:"primary",inputProps:{"aria-label":"secondary checkbox"}})),r.a.createElement(R.a,null,a.id?r.a.createElement(V.a,{onChange:function(e){var t=new Set(i);i.has(a.id)?t.delete(a.id):t.add(a.id),o(t)},checked:a.isDie||i.has(a.id),disabled:a.isDie,color:"primary",inputProps:{"aria-label":"secondary checkbox"}}):null),r.a.createElement(R.a,null,r.a.createElement(V.a,{onChange:function(e){g({variables:{id:a.id}})},checked:a.id===e.voteWeightedId,color:"primary",inputProps:{"aria-label":"secondary checkbox"}})),r.a.createElement(R.a,{component:"th",scope:"row"},a.id),r.a.createElement(R.a,{align:"right"},a.name),r.a.createElement(R.a,{align:"right"},a.roleName),r.a.createElement(R.a,{align:"right"},a.votedNumber),r.a.createElement(R.a,{align:"right"},a.chiefVote.toString()),r.a.createElement(R.a,{align:"right"},a.vote.toString()),r.a.createElement(R.a,{align:"right"},r.a.createElement("span",{style:{color:a.isEmpty?"gray":a.isVoteFinish?"lightgreen":"orange",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf")))}))))))}function ye(){var e=Object(o.a)(["\n  {\n    roles {\n      id\n      name\n      number\n    }\n    players {\n      id\n      name\n      roleName\n      isEmpty\n    }\n  }\n"]);return ye=function(){return e},e}Object(m.a)(ye());var Ce=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}}));function Se(e){var a=Ce(),t=function(e){var a=0,t=[];return e.forEach((function(e){var n=e.number;n&&(a+=n,t.push(e))})),{total:a,data:t}}(e.data),n=t.total,l=t.data;return r.a.createElement(B.a,{component:M.a},r.a.createElement(z.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(L.a,null,r.a.createElement(F.a,null,r.a.createElement(R.a,null,"\u89d2\u8272"),r.a.createElement(R.a,{align:"right"},"\u4eba\u6578"))),r.a.createElement(N.a,null,l.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement(F.a,{key:e.name},r.a.createElement(R.a,{component:"th",scope:"row"},e.name),r.a.createElement(R.a,{align:"right"},e.number)),e.players?r.a.createElement(F.a,{align:"left"},e.players.map((function(e,a){return r.a.createElement("div",{style:{fontSize:22,marginLeft:45},key:a},"".concat(e.id," : ").concat(e.name))}))):null)})),r.a.createElement(F.a,null,r.a.createElement(R.a,{align:"right"},"\u7e3d\u4eba\u6578"),r.a.createElement(R.a,{align:"right"},n)))))}function ke(e){return r.a.createElement(Se,{data:e.data})}var Ie=t(443),xe=t(427),we=t(424),$e=t(73),De=t.n($e),Ve=t(203),Te=t.n(Ve),We=t(271),Pe=t.n(We),ze=t(423),Ne=t(444),Re=t(84),Be=t.n(Re);function Le(){var e=Object(o.a)(["\n  {\n    roles {\n      id\n      name\n      \n    }\n    \n  }\n"]);return Le=function(){return e},e}var Fe=Object(m.a)(Le()),Me=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:250},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}}));function Ue(e){var a,t=Me(),n=r.a.useState(-1),l=Object(c.a)(n,2),i=l[0],o=l[1],m=r.a.useState(0),u=Object(c.a)(m,2),d=u[0],s=u[1],f=Object(ze.a)(Fe),b=f.loading,g=(f.error,f.data);return b?r.a.createElement("div",null,"Loading"):(console.log(g),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(Ne.a,{id:"combo-box-demo",options:g.roles.filter((function(e){return e.id>0})),getOptionLabel:function(e){return e.name},style:{width:300},onChange:function(e,a){o(a.id)},renderInput:function(e){return r.a.createElement(P.a,Object.assign({},e,{label:"\u89d2\u8272",variant:"outlined",margin:"dense"}))}}),r.a.createElement(P.a,{id:"standard-basic",label:"\u4eba\u6578",variant:"outlined",className:t.margin,margin:"dense",type:"number",value:d,onChange:function(e){return s(e.target.value)}}),r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(we.a,(a={size:"medium",color:"secondary","aria-label":"add"},Object(x.a)(a,"size","small"),Object(x.a)(a,"onClick",(function(){e.updateRoleNumber({id:i,number:parseInt(d)})})),a),r.a.createElement(Be.a,null)))))}var Ge=t(449),He=t(450),Ae="card",qe={border:"1px dashed gray",padding:"0.5rem 1rem",marginBottom:".5rem",backgroundColor:"white",cursor:"move"},Ye=function(e){var a=e.id,t=e.text,l=e.index,i=e.moveCard,o=Object(n.useRef)(null),m=Object(Ge.a)({accept:Ae,hover:function(e,a){if(o.current){var t=e.index,n=l;if(t!==n){var r=o.current.getBoundingClientRect(),c=(r.bottom-r.top)/2,m=a.getClientOffset().y-r.top;t<n&&m<c||t>n&&m>c||(i(t,n),e.index=n)}}}}),u=Object(c.a)(m,2)[1],d=Object(He.a)({item:{type:Ae,id:a,index:l},collect:function(e){return{isDragging:e.isDragging()}}}),s=Object(c.a)(d,2),f=s[0].isDragging?0:1;return(0,s[1])(u(o)),r.a.createElement("div",{ref:o,style:Object($.a)({},qe,{opacity:f})},t)},Je=t(270),Qe=t.n(Je),Ke={width:400},Xe=function(e){var a=Object(n.useState)(Object(w.a)(e.data)),t=Object(c.a)(a,2),l=t[0],i=t[1],o=Object(n.useCallback)((function(a,t){var n=l[a],r=Qe()(l,{$splice:[[a,1],[t,0,n]]});i(r),e.onUpdate(r)}),[l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:Ke},l.map((function(e,a){return function(e,a){return r.a.createElement(Ye,{key:e.id,index:a,id:e.id,text:e.text,moveCard:o})}(e,a)}))))},Ze=t(426),_e=t(293);function ea(){var e=Object(o.a)(["\n  mutation UpdateRolePriority($name: String!, $ids: [Int]!) {\n    updateTemplateRolePriority(name: $name, ids: $ids)\n  }\n"]);return ea=function(){return e},e}function aa(){var e=Object(o.a)(["\n  mutation UpdateRule($name: String!, $description: String!) {\n    updateTemplateDescription(name: $name, description: $description)\n  }\n"]);return aa=function(){return e},e}function ta(){var e=Object(o.a)(["\n  mutation UpdateTempl($roleId: Int!, $number: Int!, $name: String!) {\n    updateTemplateRole(name: $name, number: $number, roleId: $roleId)\n  }\n"]);return ta=function(){return e},e}function na(){var e=Object(o.a)(["\n  query GetTemplate($name: String!) {\n    template(name: $name) {\n      roles {\n        name\n        number\n        id\n      }\n      description\n    }\n  }\n"]);return na=function(){return e},e}var ra=Object(m.a)(na()),la=Object(m.a)(ta()),ia=Object(m.a)(aa()),ca=Object(m.a)(ea());function oa(e){var a=e.children,t=e.value,n=e.index,l=Object(D.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},l),t===n&&r.a.createElement(C.a,{p:3},a))}var ma=function(e){var a=[];return e.forEach((function(e){var t=e.name,n=e.id;a.push({id:n,text:t})})),a};function ua(e){var a=e.name,t=r.a.useState([]),n=Object(c.a)(t,2),l=n[0],i=n[1],o=r.a.useState([]),m=Object(c.a)(o,2),u=m[0],d=m[1],s=r.a.useState(!1),g=Object(c.a)(s,2),E=(g[0],g[1],Object(b.a)(ra,{fetchPolicy:"network-only"})),p=Object(c.a)(E,2),h=p[0],O=p[1],j=O.loading,y=(O.error,O.data),C=O.called;console.log(y);var S=Object(f.a)(ca,{onCompleted:function(){console.log("update dark"),h({variables:{name:a}})}}),k=Object(c.a)(S,2),I=k[0];k[1];if(r.a.useEffect((function(){h({variables:{name:a}})}),[]),r.a.useEffect((function(){if(!j&&C){var e=ma(y.template.roles);i(e.map((function(e){return e.id}))),d(e.map((function(e){return e.id})))}}),[y]),!C||j)return r.a.createElement("div",null,"Loading");var x=ma(y.template.roles);return r.a.createElement(Ze.a,{backend:_e.a},r.a.createElement(v.a,{"aria-label":"delete",onClick:function(){I({variables:{name:a,ids:l}})},color:u.toString()===l.toString()?"primary":"secondary"},r.a.createElement(Be.a,null)),r.a.createElement(Xe,{data:x,onUpdate:function(e){console.log("update view"),i(e.map((function(e){return e.id})))}}))}function da(e){var a=e.name,t=e.data,n=Object(f.a)(la),l=Object(c.a)(n,1)[0];return r.a.useEffect((function(){return console.log("mount"+a),function(){console.log("umount"+a)}}),[]),r.a.createElement("div",null,r.a.createElement(E.a,{variant:"h2",gutterBottom:!0},a),r.a.createElement(Ue,{updateRoleNumber:function(e){var t=e.id,n=e.number;console.log(t,a),l({variables:{roleId:t,name:a,number:n}})}}),r.a.createElement(ke,{data:t}))}function sa(e){var a=r.a.useState(e.value),t=Object(c.a)(a,2),n=t[0],l=t[1];return r.a.createElement("div",null,r.a.createElement(v.a,{"aria-label":"delete",onClick:function(){e.updateRule({variables:{description:n,name:e.name}})},color:n===e.value?"primary":"secondary"},r.a.createElement(Be.a,null)),r.a.createElement(P.a,{id:"outlined-multiline-static",multiline:!0,rows:4,fullWidth:!0,value:n,variant:"outlined",onChange:function(e){return l(e.target.value)}}))}function fa(e){var a=e.name,t=Object(ze.a)(ra,{variables:{name:a}}),n=t.loading,l=(t.error,t.data),i=t.refetch,o=Object(f.a)(ia,{onCompleted:function(){i()}}),m=Object(c.a)(o,2),u=m[0];m[1];return n?r.a.createElement("div",null,"Loading"):r.a.createElement(sa,{value:l.template.description,updateRule:u,name:a})}function ba(e){var a=e.name,t=e.data,n=r.a.useState(0),l=Object(c.a)(n,2),i=l[0],o=l[1];return r.a.createElement(M.a,{square:!0},r.a.createElement(Ie.a,{value:i,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){o(a)},"aria-label":"disabled tabs example"},r.a.createElement(xe.a,{label:"\u89d2\u8272"}),r.a.createElement(xe.a,{label:"\u898f\u5247"}),r.a.createElement(xe.a,{label:"\u9ed1\u591c\u9806\u5e8f"})),r.a.createElement(oa,{value:i,index:0},r.a.createElement(da,{name:a,data:t})),r.a.createElement(oa,{value:i,index:1},r.a.createElement(fa,{name:a})),r.a.createElement(oa,{value:i,index:2},r.a.createElement(ua,{name:a})))}function ga(){var e=Object(o.a)(["\n  mutation EnableTemplate($name: String!) {\n    enableTemplate(name: $name)\n  }\n"]);return ga=function(){return e},e}function Ea(){var e=Object(o.a)(["\n  mutation DeleteTemplate($name: String!) {\n    deleteTemplate(name: $name)\n  }\n"]);return Ea=function(){return e},e}function pa(){var e=Object(o.a)(["\n  mutation addTemplate($name: String!) {\n    addNewTemplate(name: $name)\n  }\n"]);return pa=function(){return e},e}function ha(){var e=Object(o.a)(["\n  {\n    templates {\n      isEnabled\n      name\n    }\n  }\n"]);return ha=function(){return e},e}var va=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:250},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}})),Oa=(Object(m.a)(ha()),Object(m.a)(pa())),ja=Object(m.a)(Ea()),ya=Object(m.a)(ga());function Ca(e){var a=va();return r.a.createElement(B.a,{component:M.a},r.a.createElement(z.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(L.a,null,r.a.createElement(F.a,null,r.a.createElement(R.a,null,"\u9078\u64c7"),r.a.createElement(R.a,{align:"left"},"\u904a\u6232\u6a21\u5f0f"),r.a.createElement(R.a,{align:"right"},r.a.createElement("div",{style:{marginRight:10}},"\u7de8\u8f2f")),r.a.createElement(R.a,{align:"right"},r.a.createElement("div",{style:{marginRight:10}},"\u522a\u9664")))),r.a.createElement(N.a,null,e.data.map((function(a){return r.a.createElement(F.a,{key:a.name},r.a.createElement(R.a,null,r.a.createElement(V.a,{onChange:function(t){t.target.checked&&e.onSelect(a.name)},color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:a.isEnabled})),r.a.createElement(R.a,{align:"left"},a.name),r.a.createElement(R.a,{align:"right"},r.a.createElement(v.a,{"aria-label":"delete",onClick:function(){console.log(a.name),e.onEdit(a.name)},disabled:!a.isEnabled},r.a.createElement(Pe.a,null))),r.a.createElement(R.a,{align:"right"},r.a.createElement(v.a,{"aria-label":"delete",onClick:function(){e.onDelete(a.name)},disabled:a.isEnabled},r.a.createElement(Te.a,null))))})))))}function Sa(e){var a,t=va(),n=Object(f.a)(Oa),l=Object(c.a)(n,1)[0],i=Object(f.a)(ja),o=Object(c.a)(i,1)[0],m=r.a.useState(""),u=Object(c.a)(m,2),d=u[0],s=u[1],b=r.a.useState(!1),g=Object(c.a)(b,2),E=(g[0],g[1],Object(f.a)(ya,{onCompleted:function(){}})),p=Object(c.a)(E,2),h=p[0];p[1];return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(P.a,{id:"standard-basic",label:"\u6a21\u5f0f\u540d\u7a31",variant:"outlined",className:t.margin,margin:"dense",value:d,onChange:function(e){return s(e.target.value)}}),r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(we.a,(a={size:"medium",color:"secondary","aria-label":"add"},Object(x.a)(a,"size","small"),Object(x.a)(a,"onClick",(function(){l({variables:{name:d}})})),a),r.a.createElement(De.a,null)))),r.a.createElement(j.a,{maxWidth:"sm"},r.a.createElement(Ca,{data:e.data.templates,onEdit:function(a){e.setEditName(a)},onSelect:function(e){h({variables:{name:e}})},onDelete:function(e){o({variables:{name:e}})}})))}function ka(e){va();var a=r.a.useState(""),t=Object(c.a)(a,2),n=(t[0],t[1],r.a.useState("")),l=Object(c.a)(n,2),i=l[0],o=l[1],m=Object(f.a)(Oa),u=(Object(c.a)(m,1)[0],Object(f.a)(ja)),d=(Object(c.a)(u,1)[0],r.a.useState(!1)),s=Object(c.a)(d,2);s[0],s[1];return console.log(),i?r.a.createElement("div",null,r.a.createElement(C.a,{display:"flex"},r.a.createElement(W.a,{variant:"contained",color:"secondary",onClick:function(){o("")}},"\u9000\u51fa")),r.a.createElement(ba,{name:i,data:e.data})):r.a.createElement(Sa,{setEditName:function(e){o(e)},data:e.tData})}function Ia(){var e=Object(o.a)(["\n  {\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n  }\n"]);return Ia=function(){return e},e}Object(m.a)(Ia());function xa(e){var a=e.data.enabledTemplate,t=a.name,n=a.description,l=a.roles;return r.a.createElement("div",null,r.a.createElement(E.a,{variant:"h2",gutterBottom:!0},t),r.a.createElement(P.a,{id:"outlined-multiline-static",multiline:!0,rows:6,fullWidth:!0,value:n||"",variant:"outlined",label:"\u898f\u5247",disabled:!0}),r.a.createElement(Se,{data:l}))}var wa=t(127),$a=t(429),Da=t(445),Va=t(428),Ta=t(431),Wa=t(430),Pa=t(273),za=t.n(Pa),Na=t(275),Ra=t.n(Na),Ba=t(276),La=t.n(Ba),Fa=t(272),Ma=t.n(Fa),Ua=t(274),Ga=t.n(Ua),Ha=t(277),Aa=t.n(Ha);function qa(){var e=Object(o.a)(["\n  mutation VoteChiefStart {\n    voteChiefStart\n  }\n"]);return qa=function(){return e},e}function Ya(){var e=Object(o.a)(["\n  mutation VoteStart($targets: [Int]) {\n    voteStart(targets: $targets)\n  }\n"]);return Ya=function(){return e},e}function Ja(){var e=Object(o.a)(["\n  mutation RemoveAllPlayer {\n    removeAllPlayer\n  }\n"]);return Ja=function(){return e},e}function Qa(){var e=Object(o.a)(["\n  mutation GenerateTemplatePlayer {\n    generateTemplatePlayer\n  }\n"]);return Qa=function(){return e},e}function Ka(){var e=Object(o.a)(["\n  mutation GenerateTemplateRole($isCovertWolfToHuman: Boolean!) {\n    generateTemplateRole(isCovertWolfToHuman: $isCovertWolfToHuman)\n  }\n"]);return Ka=function(){return e},e}function Xa(){var e=Object(o.a)(["\n  mutation UpdatePlayerName($id: Int!, $name: String!) {\n    updatePlayerName(id: $id, name: $name)\n  }\n"]);return Xa=function(){return e},e}function Za(){var e=Object(o.a)(["\n  mutation ResetEvent {\n    resetEvent\n  }\n"]);return Za=function(){return e},e}function _a(){var e=Object(o.a)(["\n  {\n    templates {\n      isEnabled\n      name\n    }\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n    players {\n      pass\n      isTarget\n      id\n      name\n      roleName\n      vote\n      chiefVote\n      isEmpty\n      isDie\n      isVoteFinish\n      isValidCandidate\n      votedNumber\n      isChief\n      chiefVoteState {\n        isDropout\n        isCandidate\n        type\n      }\n    }\n    gameInfo(id: 0) {\n      isVoteFinish\n      chiefId\n      isDark\n      voteWeightedId\n      hasVoteTarget\n      hasChief\n      isChiefCandidateConfirmed\n      repeatTimes\n      isEventBusy\n    }\n  }\n"]);return _a=function(){return e},e}var et=Object(m.a)(_a()),at=Object(m.a)(Za()),tt=Object(m.a)(Xa()),nt=Object(m.a)(Ka()),rt=Object(m.a)(Qa()),lt=Object(m.a)(Ja()),it=Object(m.a)(Ya()),ct=Object(m.a)(qa()),ot=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:250},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},repeatTimes:{width:e.spacing(3),height:e.spacing(3)}}}));function mt(e){var a=e.children,t=e.value,n=e.index,l=Object(D.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},l),t===n&&r.a.createElement(C.a,{p:3},a))}var ut=function(e){var a={};e.players.forEach((function(e){var t=e.roleName,n=e.name,r=e.id;a[t]?a[t].push({name:n||"",id:r}):a[t]=[{name:n||"",id:r}]}));var t=[];return e.enabledTemplate.roles.forEach((function(e){var n=e.name;t.push(Object($.a)({},e,{players:a[n]}))})),t};function dt(e){return r.a.createElement(ke,{data:e.data})}function st(e){var a=r.a.useState([]),t=Object(c.a)(a,2),n=t[0],l=t[1],i=Object(f.a)(e.hasChief||e.hasVoteTarget?it:ct,{onCompleted:function(){e.onClose()}}),o=Object(c.a)(i,1)[0],m=e.hasTarget||e.hasChief;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,null,r.a.createElement(Va.a,{id:"alert-dialog-slide-description"},"".concat(e.hasChief?"\u8acb\u9078\u64c7\u653e\u9010\u7684\u76ee\u6a19":"\u8acb\u9078\u64c7\u8b66\u9577\u5019\u9078\u4eba",", \u76ee\u6a19\u5fc5\u9808\u591a\u65bc\u4e00\u4eba, \u6295\u7968\u4eba\u6578\u4e5f\u5fc5\u9808\u591a\u65bc\u4e00\u4eba")),e.players.filter((function(e){return e.isValidCandidate})).map((function(a){return r.a.createElement("div",{key:a.id},r.a.createElement(Da.a,{checked:n.includes(a.id),name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){n.includes(a.id)||n.length+1===e.players.filter((function(e){return!e.isDie&&0!==e.id})).length||l([].concat(Object(w.a)(n),[a.id]))}})," ".concat(a.id," : ").concat(a.name||""))})),r.a.createElement(Da.a,{checked:0===n.length,name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){m||l([])}}),"\u6240\u6709\u4eba"),r.a.createElement(J.a,null,(0===n.length||n.length>1)&&r.a.createElement(W.a,{onClick:function(){o({variables:{targets:n}})},color:"primary"},"\u78ba\u8a8d")))}function ft(e){var a=e.gameInfo,t=(ot(),Object(f.a)(at)),n=Object(c.a)(t,1)[0],l=Object(f.a)(nt),i=Object(c.a)(l,1)[0],o=Object(f.a)(rt),m=Object(c.a)(o,1)[0],u=Object(f.a)(lt),d=Object(c.a)(u,1)[0],s=Object(f.a)(it),b=(Object(c.a)(s,1)[0],r.a.useState(!1)),g=Object(c.a)(b,2),E=g[0],p=g[1],h=Object(wa.a)(e.name,500),O=Object(c.a)(h,2),j=O[0],y=O[1],S=r.a.useState(e.name||""),k=Object(c.a)(S,2),I=k[0],w=k[1],D=Object(f.a)(tt),W=Object(c.a)(D,2),z=W[0],N=W[1].called,R=r.a.useState({isCovertWolfToHuman:!1}),B=Object(c.a)(R,2),L=B[0],F=B[1];r.a.useEffect((function(){j&&(j!==e.name||N)&&z({variables:{id:0,name:j}})}),[j]);var M=-1!==e.chiefId;return e.isPlayerMode?e.isDark?r.a.createElement(je,{data:e.players,chiefId:e.chiefId,voteWeightedId:e.voteWeightedId}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"simple-dialog-title",open:E,onClose:function(){p(!1)}},r.a.createElement($a.a,{id:"form-dialog-title"},M?"\u653e\u9010\u958b\u59cb":"\u7af6\u9078\u8b66\u9577"),r.a.createElement(st,{players:e.players,onClose:function(){p(!1)},hasChief:M,hasVoteTarget:e.hasVoteTarget})),r.a.createElement(C.a,{display:"flex"},r.a.createElement(Wa.a,{title:"\u7522\u751f\u89d2\u8272",placement:"top"},r.a.createElement(v.a,{"aria-label":"delete",onClick:function(){i({variables:{isCovertWolfToHuman:L.isCovertWolfToHuman}})}},r.a.createElement(Ma.a,{fontSize:"large"}))),r.a.createElement(Wa.a,{title:"\u522a\u9664\u73a9\u5bb6",placement:"top"},r.a.createElement(v.a,{"aria-label":"delete",onClick:function(){d()}},r.a.createElement(za.a,{fontSize:"large"}))),M?r.a.createElement(Wa.a,{title:"\u653e\u9010\u6295\u7968",placement:"top"},r.a.createElement(v.a,{"aria-label":"delete",onClick:function(){p(!0)}},r.a.createElement(Ga.a,{fontSize:"large"}))):r.a.createElement(Wa.a,{title:"\u8b66\u9577\u9078\u8209",placement:"top"},r.a.createElement(v.a,{"aria-label":"delete",onClick:function(){p(!0)}},r.a.createElement(Ta.a,{badgeContent:a.repeatTimes+1===1?0:a.repeatTimes+1,color:"primary"},r.a.createElement(Ra.a,{fontSize:"large"})))),r.a.createElement(Wa.a,{title:"\u91cd\u7f6e\u9078\u8209",placement:"top"},r.a.createElement(v.a,{disabled:0===a.repeatTimes&&!a.isEventBusy,"aria-label":"delete",onClick:function(){n()}},r.a.createElement(La.a,{fontSize:"large"})))),r.a.createElement(C.a,{display:"flex"},r.a.createElement(T.a,{control:r.a.createElement(V.a,{checked:L.isCovertWolfToHuman,onChange:function(e){F(Object($.a)({},L,Object(x.a)({},e.target.name,e.target.checked)))},name:"isCovertWolfToHuman"}),label:"\u8f49\u5316\u72fc\u4eba\u8b8a\u6210\u4eba\u985e"})),r.a.createElement(C.a,{display:"flex"},r.a.createElement(P.a,{autoComplete:"off",color:"secondary",id:"standard-basic",label:"\u59d3\u540d",variant:"outlined",margin:"dense",value:I,onChange:function(e){y(e.target.value),w(e.target.value)}})),r.a.createElement(se,{data:e.players,chiefId:e.chiefId,voteWeightedId:e.voteWeightedId})):r.a.createElement("div",{style:{}},r.a.createElement(C.a,{display:"flex"},r.a.createElement(Wa.a,{title:"\u52a0\u5165\u73a9\u5bb6",placement:"top"},r.a.createElement(v.a,{"aria-label":"delete",onClick:function(){m()}},r.a.createElement(Aa.a,{fontSize:"large"})))),r.a.createElement(xa,{data:e.data}))}function bt(e){var a=Object(S.f)(),t=r.a.useState(0),l=Object(c.a)(t,2),i=l[0],o=l[1],m=Object(b.a)(et,{fetchPolicy:"network-only"}),u=Object(c.a)(m,2),d=u[0],s=u[1],f=s.loading,g=s.data,E=s.error,p=s.called,h=!0;if(Object(n.useEffect)((function(){h&&d();var e=setInterval((function(){h&&d()}),500);return function(){clearInterval(e),h=!1}}),[]),r.a.useEffect((function(){E&&!f&&(E.graphQLErrors.forEach((function(e){"UNAUTHENTICATED"===e.extensions.code&&(console.log("no access!!!"),a.push("/"))})),console.log("set dark"),g&&g.gameInfo.isDark&&e.setDarkMode(!0))}),[E,f,g]),r.a.useEffect((function(){g&&e.setDarkMode(g.gameInfo.isDark)}),[g]),!p||!g)return r.a.createElement("div",null,"Loading");var v=e.id,O=e.pass,y=e.name,C=g.players.length>1;return console.log(g),r.a.createElement(j.a,{maxWidth:C&&0===i?"lg":"sm"},r.a.createElement(M.a,{elevation:3},r.a.createElement(Ie.a,{value:i,indicatorColor:"secondary",textColor:"secondary",onChange:function(e,a){o(a)},"aria-label":"disabled tabs example",variant:"fullWidth"},r.a.createElement(xe.a,{label:"\u904a\u6232"}),r.a.createElement(xe.a,{label:C?"\u9ed1\u591c\u8996\u91ce":"\u6a21\u5f0f\u9078\u64c7"}),C&&r.a.createElement(xe.a,{label:"\u6a21\u5f0f"})),r.a.createElement(mt,{value:i,index:0},r.a.createElement(ft,{isPlayerMode:C,id:v,pass:O,name:y,players:g.players,chiefId:g.gameInfo.chiefId,isDark:g.gameInfo.isDark,voteWeightedId:g.gameInfo.voteWeightedId,gameInfo:g.gameInfo,data:g})),r.a.createElement(mt,{value:i,index:1},C?r.a.createElement(dt,{data:ut(g)}):r.a.createElement(ka,{data:ut(g),tData:g})),C&&r.a.createElement(mt,{value:i,index:2},r.a.createElement(xa,{data:g}))))}var gt=t(278),Et=t.n(gt),pt=t(433),ht=t(434),vt=t(298),Ot=t(282),jt=t.n(Ot),yt=t(279),Ct=t.n(yt),St=t(280),kt=t.n(St),It=t(281),xt=t.n(It);function wt(){var e=Object(o.a)(["\n  {\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n  }\n"]);return wt=function(){return e},e}function $t(){var e=Object(o.a)(["\n  mutation dropOutChiefCandidate {\n    setIsChiefDropOut\n  }\n"]);return $t=function(){return e},e}function Dt(){var e=Object(o.a)(["\n  mutation setIsVoter {\n    setIsVoter\n  }\n"]);return Dt=function(){return e},e}function Vt(){var e=Object(o.a)(["\n  mutation submitChiefCandidate {\n    setIsChiefCandidate\n  }\n"]);return Vt=function(){return e},e}function Tt(){var e=Object(o.a)(["\n  mutation UpdatePlayerName($id: Int!, $name: String!) {\n    updatePlayerName(id: $id, name: $name)\n  }\n"]);return Tt=function(){return e},e}function Wt(){var e=Object(o.a)(["\n  mutation SubmitVote($target: Int!) {\n    submitVote(target: $target)\n  }\n"]);return Wt=function(){return e},e}function Pt(){var e=Object(o.a)(["\n  query GetPlayer($id: Int!, $pass: String!) {\n    player(id: $id, pass: $pass) {\n      id\n      name\n      roleName\n    }\n    players {\n      id\n      name\n      isEmpty\n      revealedRole\n      isChief\n      isDie\n      vote\n      chiefVote\n      isValidCandidate\n      isVoteFinish\n      chiefVoteState {\n        isDropout\n        isCandidate\n      }\n    }\n\n    gameInfo(id: $id) {\n      uuid\n      isVoteFinish\n      chiefId\n      isDark\n      isChiefCandidateConfirmed\n      chiefVoteState {\n        isDropout\n        isCandidate\n      }\n    }\n  }\n"]);return Pt=function(){return e},e}var zt=Object(O.a)((function(e){return{margin:{},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},submit:{margin:e.spacing(3,0,2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),Nt=Object(m.a)(Pt()),Rt=Object(m.a)(Wt()),Bt=Object(m.a)(Tt()),Lt=Object(m.a)(Vt()),Ft=Object(m.a)(Dt()),Mt=Object(m.a)($t()),Ut=Object(m.a)(wt());function Gt(e){return r.a.createElement(vt.a,e,r.a.createElement("path",{d:"M14.5,12.59l0.9,3.88L12,14.42l-3.4,2.05l0.9-3.87l-3-2.59l3.96-0.34L12,6.02l1.54,3.64L17.5,10L14.5,12.59z M12,3.19 l7,3.11V11c0,4.52-2.98,8.69-7,9.93C7.98,19.69,5,15.52,5,11V6.3L12,3.19 M12,1L3,5v6c0,5.55,3.84,10.74,9,12c5.16-1.26,9-6.45,9-12 V5L12,1L12,1z"}))}function Ht(e){var a=e.children,t=e.value,n=e.index,l=Object(D.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},l),t===n&&r.a.createElement(C.a,{p:3},a))}function At(e){var a=zt();return console.log(e.data),r.a.createElement(B.a,{component:M.a},r.a.createElement(z.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(L.a,null,r.a.createElement(F.a,null,r.a.createElement(R.a,null,"ID"),r.a.createElement(R.a,{align:"center"},"\u73a9\u5bb6"),r.a.createElement(R.a,{align:"center"},"\u8b66\u9577"),r.a.createElement(R.a,{align:"center"},"\u653e\u9010"),r.a.createElement(R.a,{align:"right"},"\u72c0\u614b"))),r.a.createElement(N.a,null,e.data.map((function(e){return r.a.createElement(F.a,{key:e.id},r.a.createElement(R.a,{component:"th",scope:"row"},0===e.id?r.a.createElement("div",{style:{width:30}},r.a.createElement(k.a,{src:"infinity.svg"})):e.isDie?r.a.createElement("span",{"aria-label":"paw",style:{fontSize:30}},"\ud83d\udc3e"):r.a.createElement("span",{"aria-label":"paw",style:{fontSize:30}},e.id),e.isChief&&0!==e.id&&r.a.createElement("span",{"aria-label":"paw",style:{fontSize:30}},"\ud83c\udf1f"),e.chiefVoteState&&!0===e.chiefVoteState.isCandidate&&!1===e.chiefVoteState.isDropout&&r.a.createElement("span",{span:!0,"aria-label":"paw",style:{fontSize:30,marginLeft:5}},"\ud83d\uddf3\ufe0f"),e.chiefVoteState&&!0===e.chiefVoteState.isCandidate&&!0===e.chiefVoteState.isDropout&&r.a.createElement("span",{span:!0,"aria-label":"paw",style:{fontSize:30,marginLeft:5}},"\ud83d\udeab")),r.a.createElement(R.a,{align:"center"},e.name),r.a.createElement(R.a,{align:"right"},e.chiefVote.toString()),r.a.createElement(R.a,{align:"right"},e.vote.toString()),r.a.createElement(R.a,{align:"right"},r.a.createElement("span",{style:{color:e.isEmpty?"gray":e.isVoteFinish?"lightgreen":"orange",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf")))})))))}function qt(e){var a=r.a.useState(-1),t=Object(c.a)(a,2),n=t[0],l=t[1],i=Object(f.a)(Rt),o=Object(c.a)(i,2),m=o[0];o[1].called;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,null,e.players.filter((function(e){return e.isValidCandidate})).map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(Da.a,{checked:e.id===n,name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){l(e.id)}})," ".concat(e.id," : ").concat(e.name||""))})),r.a.createElement(Da.a,{checked:-1===n,name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){l(-1)}}),"\u68c4\u6b0a"),r.a.createElement(J.a,null,r.a.createElement(W.a,{onClick:function(){m({variables:{target:n}})},color:"primary"},"\u78ba\u8a8d")))}function Yt(e){var a=Object(f.a)(Ft,{onCompleted:function(){e.onClose()}}),t=Object(c.a)(a,1)[0],n=Object(f.a)(Lt,{onCompleted:function(){e.onClose()}}),l=Object(c.a)(n,1)[0],i=Object(f.a)(Mt,{onCompleted:function(){e.onClose()}}),o=Object(c.a)(i,1)[0];return r.a.createElement(r.a.Fragment,null,e.isCandidate?r.a.createElement($a.a,{id:"form-dialog-title"},"\u662f\u5426\u9000\u6c34\uff1f"):r.a.createElement($a.a,{id:"form-dialog-title"},"\u662f\u5426\u7af6\u9078\u8b66\u9577\uff1f"),r.a.createElement(Q.a,null,r.a.createElement(J.a,null,r.a.createElement(W.a,{onClick:function(){e.isCandidate?o():l()}},r.a.createElement(Ct.a,{style:{color:"green"}})),!e.isCandidate&&r.a.createElement(W.a,{onClick:function(){t()}},r.a.createElement(kt.a,{style:{color:"red"}})),r.a.createElement(W.a,{onClick:function(){e.onClose()}},r.a.createElement(xt.a,null)))))}function Jt(e){var a=zt(),t=Object(S.f)(),l=Object(b.a)(Nt,{fetchPolicy:"network-only"}),i=Object(c.a)(l,2),o=i[0],m=i[1],u=m.loading,d=m.error,s=m.data,g=m.called,p=r.a.useState(!1),h=Object(c.a)(p,2),O=h[0],j=h[1],y=Object(wa.a)(e.name,500),k=Object(c.a)(y,2),I=k[0],x=k[1],w=r.a.useState(e.name),$=Object(c.a)(w,2),D=$[0],V=$[1],T=Object(f.a)(Bt),W=Object(c.a)(T,2),z=W[0],N=W[1].called,R=!0;Object(n.useEffect)((function(){R&&o({variables:{id:e.id,pass:e.pass}});var a=setInterval((function(){R&&o({variables:{id:e.id,pass:e.pass}})}),500);return function(){clearInterval(a),R=!1}}),[]),r.a.useEffect((function(){I&&(I!==e.name||N)&&z({variables:{id:e.id,name:I}}),d&&!u&&t.push("/")}),[I,d,u]),r.a.useEffect((function(){s&&e.setDarkMode(s.gameInfo.isDark)}),[s]);var B=r.a.useState(""),L=Object(c.a)(B,2),F=L[0],M=L[1],U=s?s.gameInfo.uuid:"",G=s?s.player.roleName:"";if(r.a.useEffect((function(){return M(""),s&&(console.log(s),setTimeout((function(){M(s.player.roleName)}),1e3)),function(){M("")}}),[U,G]),!g||!s)return r.a.createElement("div",null,"Loading");var H=-1!==s.gameInfo.chiefId,A=s.player,q=A.id;A.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"simple-dialog-title",open:!s.gameInfo.isVoteFinish},r.a.createElement($a.a,{id:"form-dialog-title"},H?"\u653e\u9010\u73a9\u5bb6":"\u9078\u64c7\u8b66\u9577"),r.a.createElement(qt,{players:s.players,id:q})),!H&&r.a.createElement(C.a,{display:"flex"},s.gameInfo.chiefVoteState?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"simple-dialog-title",open:O},r.a.createElement(Yt,{onClose:function(){j(!1)},isCandidate:s.gameInfo.chiefVoteState.isCandidate})),!0===s.gameInfo.chiefVoteState.isCandidate?r.a.createElement(Wa.a,{title:"\u9000\u6c34",placement:"top"},r.a.createElement(v.a,{disabled:s.gameInfo.chiefVoteState.isDropout,"aria-label":"delete",onClick:function(){j(!0)}},r.a.createElement(jt.a,{fontSize:"large"}))):r.a.createElement(Wa.a,{title:"\u7af6\u9078\u8b66\u9577",placement:"top"},r.a.createElement(v.a,{disabled:null!==s.gameInfo.chiefVoteState.isCandidate,"aria-label":"delete",onClick:function(){j(!0)}},r.a.createElement(Gt,{fontSize:"large"})))):null),r.a.createElement(C.a,{display:"flex"},r.a.createElement(P.a,{autoComplete:"off",color:"secondary",id:"standard-basic",label:"\u59d3\u540d",variant:"outlined",className:a.margin,margin:"dense",value:D,onChange:function(e){x(e.target.value),V(e.target.value)}})),r.a.createElement(pt.a,{className:a.root},r.a.createElement(ht.a,null,r.a.createElement(Et.a,{isFlipped:!!F,flipDirection:"vertical"},r.a.createElement(E.a,{variant:"h1",component:"h1"},"\u2754"),r.a.createElement(E.a,{variant:"h2",component:"h2"},F||"\u2754")))),r.a.createElement(At,{data:s.players,chiefId:s.gameInfo.chiefId}))}function Qt(){var e=Object(ze.a)(Ut,{fetchPolicy:"network-only"}),a=e.loading,t=(e.error,e.data);return a?r.a.createElement("div",null,"Loading"):r.a.createElement(xa,{data:t})}function Kt(e){var a=e.id,t=e.pass,n=e.name,l=r.a.useState(0),i=Object(c.a)(l,2),o=i[0],m=i[1];return r.a.createElement(j.a,{maxWidth:"sm"},r.a.createElement(M.a,{elevation:3},r.a.createElement(Ie.a,{value:o,indicatorColor:"secondary",textColor:"secondary",onChange:function(e,a){m(a)},"aria-label":"disabled tabs example",variant:"fullWidth"},r.a.createElement(xe.a,{label:"\u73a9\u5bb6"}),r.a.createElement(xe.a,{label:"\u6a21\u5f0f"})),r.a.createElement(Ht,{value:o,index:0},r.a.createElement(Jt,{id:a,pass:t,name:n,setDarkMode:e.setDarkMode})),r.a.createElement(Ht,{value:o,index:1},r.a.createElement(Qt,null))))}var Xt=t(206),Zt=t(210);function _t(){var e=Object(o.a)(["\n  mutation UpdatePlayerPass($id: Int!, $pass: String!) {\n    updatePlayerPass(id: $id, pass: $pass) {\n      isValid\n      id\n    }\n  }\n"]);return _t=function(){return e},e}function en(){var e=Object(o.a)(["\n  {\n    players {\n      id\n      name\n      isEmpty\n    }\n  }\n"]);return en=function(){return e},e}var an=Object(O.a)((function(e){return{margin:{},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},submit:{marginTop:5},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),tn=Object(m.a)(en()),nn=Object(m.a)(_t());function rn(e){return r.a.createElement("svg",{viewBox:"0 0 24 24",style:{width:"1.5rem",fill:"white"}},r.a.createElement("path",{d:e.path}))}function ln(){var e=Object(S.f)(),a=an(),t=r.a.useState(-1),n=Object(c.a)(t,2),l=n[0],i=n[1],o=r.a.useState(""),m=Object(c.a)(o,2),u=m[0],d=m[1],s=r.a.useState(!1),b=Object(c.a)(s,2),g=(b[0],b[1],Object(ze.a)(tn,{})),E=g.loading,p=(g.error,g.data),h=g.stopPolling,v=g.startPolling;console.log(Zt.a);var O=Object(f.a)(nn,{onCompleted:function(a){a.updatePlayerPass.isValid&&e.push("/game")}}),y=Object(c.a)(O,2),C=y[0],k=y[1];k.loading,k.data;return r.a.useEffect((function(){return v(500),function(){h()}}),[]),E?r.a.createElement("div",null,"Loading"):r.a.createElement(j.a,{component:"main"},r.a.createElement("div",{style:{width:350,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement(Xt.a,{src:"wolf-girl.png",size:"350"}),r.a.createElement("div",{style:{marginLeft:15,marginRight:10}},r.a.createElement(Ne.a,{fullWidth:!0,id:"combo-box-demo",options:p.players,getOptionLabel:function(e){return"\u73a9\u5bb6 ".concat(e.id)},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{color:e.isEmpty?"gray":"lightgreen",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf")," \u73a9\u5bb6 ".concat(e.id))},onChange:function(e,a){i(a.id)},renderInput:function(e){return r.a.createElement(P.a,Object.assign({},e,{color:"secondary",label:"\u73a9\u5bb6",variant:"outlined",margin:"dense",className:a.margin}))}}),r.a.createElement(P.a,{fullWidth:!0,id:"standard-basic",label:"\u5bc6\u78bc",variant:"outlined",className:a.margin,margin:"dense",onChange:function(e){return d(e.target.value)},value:u,color:"secondary",autoComplete:"off"}),r.a.createElement(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:function(){C({variables:{id:l,pass:u}})}},r.a.createElement(rn,{path:Zt.a})))))}var cn=t(100),on=t(205),mn=t.n(on),un=t(438);function dn(){var e=Object(o.a)(["\n  mutation UpdatePlayerPass($id: Int!, $pass: String!) {\n    updatePlayerPass(id: $id, pass: $pass) {\n      isValid\n      name\n    }\n  }\n"]);return dn=function(){return e},e}function sn(){var e=Object(o.a)(["\n  mutation Logoff {\n    logoff\n  }\n"]);return sn=function(){return e},e}function fn(){var e=Object(o.a)(["\n  {\n    players {\n      id\n      name\n      isEmpty\n    }\n    login {\n      id\n      isValid\n    }\n  }\n"]);return fn=function(){return e},e}var bn=new u.a({cache:new d.a,link:new s.a({uri:"/graphql"})}),gn=new u.a({cache:new d.a,link:new s.a({uri:"/auth"})}),En=Object(O.a)((function(e){return{margin:{},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},submit:{margin:e.spacing(3,0,2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),pn=Object(m.a)(fn()),hn=Object(m.a)(sn());Object(m.a)(dn());function vn(){return r.a.createElement(E.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear())}function On(){var e=Object(S.f)(),a=Object(f.a)(hn,{onCompleted:function(){e.push("/")}}),t=Object(c.a)(a,1)[0];return r.a.createElement(v.a,{"aria-label":"delete",size:"large",onClick:function(){t()}},r.a.createElement(mn.a,{fontSize:"large"}))}function jn(e){var a=Object(S.f)(),t=Object(b.a)(pn,{fetchPolicy:"network-only"}),l=Object(c.a)(t,2),i=l[0],o=l[1],m=o.loading,u=o.error,d=o.data,s=En(),f=!0;if(Object(n.useEffect)((function(){return f&&i(),function(){f=!1}}),[]),r.a.useEffect((function(){u&&u.graphQLErrors.forEach((function(e){"UNAUTHENTICATED"===e.extensions.code&&a.push("/")}))}),[u]),m||!d)return r.a.createElement("div",null,"Loading");console.log(d,m);var g=d.login.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null),r.a.createElement(p.a,{position:"absolute"},r.a.createElement(h.a,null,r.a.createElement(E.a,{variant:"h6",className:s.title},r.a.createElement("div",{style:{width:70,margin:"auto",borderRadius:"50%",backgroundColor:"#D1ECB7"}},r.a.createElement("div",{style:{margin:2,width:50}},r.a.createElement("div",{style:{marginLeft:6,width:55}},r.a.createElement(k.a,{src:"wolf.svg",beforeInjection:function(e){e.setAttribute("style","margin-top: 10px")}}))))),r.a.createElement(On,null))),r.a.createElement("div",{style:{marginTop:100}},0===g?r.a.createElement(j.a,{maxWidth:0===g?"md":"sm"},r.a.createElement(bt,{id:g,pass:"",name:"",setDarkMode:e.setDarkMode})):r.a.createElement(Kt,{id:g,pass:"",name:"",setDarkMode:e.setDarkMode})),r.a.createElement(C.a,{pt:4},r.a.createElement(vn,null)))}var yn=function(){var e=r.a.useState(!1),a=Object(c.a)(e,2),t=a[0],n=a[1],l=r.a.useMemo((function(){return Object(I.a)({palette:{type:t?"dark":"light",secondary:{main:"#E66692"},primary:{main:"#F3BEBD"}}})}),[t]);return r.a.createElement("div",{className:"App"},r.a.createElement(un.a,{theme:l},r.a.createElement(cn.a,null,r.a.createElement(S.c,null,r.a.createElement(S.a,{exact:!0,path:"/"},r.a.createElement(g.a,{client:gn},r.a.createElement(ln,null))),r.a.createElement(S.a,{exact:!0,path:"/game"},r.a.createElement(g.a,{client:bn},r.a.createElement(jn,{setDarkMode:n})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(yn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[321,1,2]]]);
//# sourceMappingURL=main.708586bf.chunk.js.map