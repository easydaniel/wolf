(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{175:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},176:function(e,a,t){},302:function(e,a,t){e.exports=t(348)},348:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(26),l=t.n(i),c=t(8),o=t(14),m=(t(175),t(176),t(390)),u=t(15),d=t(419),s=t(422),f=t(271),b=t(428),g=t(403),p=t(415),E=t(167),h=t(412),v=t(413),O=t(350),j=t(278),y=t.n(j),C=t(388),S=t(389);t(387);Object(C.a)((function(e){return{footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6,0)}}}));var k=t(411),I=t(417),x=t(27),$=t(123),w=t(279),D=t(13),V=t(30),T=t(126),W=t(4),P=t(424),N=t(408),R=t(416),B=t(398),z=t(400),F=t(395),L=t(397),U=t(399),M=t(394),G=t(285),A=t(263),H=t.n(A),q=t(262),J=t.n(q),Q=t(396),Y=t(427),K=t(393),X=t(392);function Z(){var e=Object(o.a)(["\n  mutation UpdatePass($id: Int!, $pass: String!) {\n    updatePass(id: $id, pass: $pass)\n  }\n"]);return Z=function(){return e},e}function _(){var e=Object(o.a)(["\n  mutation ResetChiefCandidate($id: Int!) {\n    resetChiefCaniddate(id: $id)\n  }\n"]);return _=function(){return e},e}function ee(){var e=Object(o.a)(["\n  mutation SetVoteWeightedId($id: Int!) {\n    setVoteWeightedId(id: $id)\n  }\n"]);return ee=function(){return e},e}function ae(){var e=Object(o.a)(["\n  mutation SetChiefId($id: Int!) {\n    setChiefId(id: $id)\n  }\n"]);return ae=function(){return e},e}function te(){var e=Object(o.a)(["\n  mutation SetDieStatus($id: Int!) {\n    setDieStatus(id: $id)\n  }\n"]);return te=function(){return e},e}var ne=Object(C.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:750},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}})),re=Object(u.a)(te()),ie=Object(u.a)(ae()),le=Object(u.a)(ee()),ce=Object(u.a)(_()),oe=Object(u.a)(Z());function me(e){var a,t=r.a.useState(""),n=Object(c.a)(t,2),i=n[0],l=n[1],o=Object(b.a)(oe,{onError:function(){l("Access Error!"),console.log("error")},onCompleted:function(){g(!1)}}),u=Object(c.a)(o,1)[0],d=r.a.useState(!1),s=Object(c.a)(d,2),f=s[0],g=s[1],p=r.a.useState(""),E=Object(c.a)(p,2),h=E[0],v=E[1],O=function(){g(!1)};return r.a.createElement("div",null,r.a.createElement(m.a,(a={variant:"outlined",color:"primary",onClick:function(){g(!0)}},Object(D.a)(a,"color","secondary"),Object(D.a)(a,"size","small"),a),"Update"),r.a.createElement(Y.a,{open:f,onClose:O,"aria-labelledby":"form-dialog-title"},r.a.createElement(X.a,null,r.a.createElement(R.a,{autoFocus:!0,margin:"dense",id:"name",label:"PWD",type:"email",fullWidth:!0,onChange:function(e){v(e.target.value)},helperText:i,error:""!==i,onClick:function(){l("")}})),r.a.createElement(K.a,null,r.a.createElement(m.a,{onClick:O,color:"primary",size:"small"},"Cancel"),r.a.createElement(m.a,{onClick:function(){u({variables:{id:e.id,pass:h}})},color:"secondary",size:"small"},"Submit"))))}function ue(e){var a=Object(b.a)(re),t=Object(c.a)(a,1)[0],n=Object(b.a)(ie),i=Object(c.a)(n,1)[0],l=Object(b.a)(le),o=Object(c.a)(l,1)[0],m=Object(b.a)(ce),u=Object(c.a)(m,1)[0],d=e.row,s=r.a.useState(!1),f=Object(c.a)(s,2),g=f[0],p=f[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,null,r.a.createElement(F.a,null,r.a.createElement(O.a,{"aria-label":"expand row",size:"small",onClick:function(){return p(!g)}},g?r.a.createElement(J.a,null):r.a.createElement(H.a,null))),r.a.createElement(F.a,null,(0===d.id||e.chiefId>=0||d.chiefVoteState&&d.chiefVoteState.isCandidate&&!d.chiefVoteState.isDropedOut)&&r.a.createElement(P.a,{onChange:function(e){i({variables:{id:d.id}})},checked:d.id===e.chiefId,color:"primary",inputProps:{"aria-label":"secondary checkbox"}}),d.chiefVoteState.type&&r.a.createElement("button",{onClick:function(){u({variables:{id:d.id}})}},"\u91cd\u7f6e ","(".concat(d.chiefVoteState.type,")"))),r.a.createElement(F.a,null,d.id?r.a.createElement(P.a,{onChange:function(e){t({variables:{id:d.id}})},checked:d.isDie,color:"primary",inputProps:{"aria-label":"secondary checkbox"}}):null),r.a.createElement(F.a,null,r.a.createElement(P.a,{onChange:function(e){o({variables:{id:d.id}})},checked:d.id===e.voteWeightedId,color:"primary",inputProps:{"aria-label":"secondary checkbox"}})),r.a.createElement(F.a,{component:"th",scope:"row"},d.id),r.a.createElement(F.a,{align:"right"},d.name),r.a.createElement(F.a,{align:"right"},d.roleName),r.a.createElement(F.a,{align:"right"},d.votedNumber),r.a.createElement(F.a,{align:"right"},d.chiefVote.toString()),r.a.createElement(F.a,{align:"right"},d.vote.toString()),r.a.createElement(F.a,{align:"right"},r.a.createElement("span",{style:{color:d.isEmpty?"gray":d.isVoteFinish?"lightgreen":"orange",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf"))),r.a.createElement(M.a,null,r.a.createElement(Q.a,{in:g,timeout:"auto",unmountOnExit:!0},r.a.createElement(I.a,{margin:1},r.a.createElement("div",{style:{textAlign:"left"}}," PWD : ",d.pass||""),r.a.createElement(me,{id:d.id})))))}function de(e){var a=ne();return r.a.createElement(L.a,{component:G.a},r.a.createElement(B.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(U.a,null,r.a.createElement(M.a,null,r.a.createElement(F.a,null),r.a.createElement(F.a,null,"\u8b66\u9577"),r.a.createElement(F.a,null,"\u6b7b\u4ea1"),r.a.createElement(F.a,null,"\u653e\u9010\u52a0\u6b0a"),r.a.createElement(F.a,null,"ID"),r.a.createElement(F.a,{align:"left"},"\u73a9\u5bb6"),r.a.createElement(F.a,{align:"right"},"\u89d2\u8272"),r.a.createElement(F.a,{align:"right"},"\u6295\u7968"),r.a.createElement(F.a,{align:"center"},"\u8b66\u9577"),r.a.createElement(F.a,{align:"center"},"\u653e\u9010"),r.a.createElement(F.a,{align:"right"},"\u4e0a\u7dda"))),r.a.createElement(z.a,null,e.data.map((function(a){return r.a.createElement(ue,Object.assign({},e,{row:a,key:a.id}))})))))}function se(){var e=Object(o.a)(["\nmutation SetVoteWeightedId($id: Int!) {\n  setVoteWeightedId(id: $id)\n}\n"]);return se=function(){return e},e}function fe(){var e=Object(o.a)(["\n  mutation SetChiefId($id: Int!) {\n    setChiefId(id: $id)\n  }\n"]);return fe=function(){return e},e}function be(){var e=Object(o.a)(["\n  mutation SetDieStatus($id: Int!) {\n    setDieStatus(id: $id)\n  }\n"]);return be=function(){return e},e}function ge(){var e=Object(o.a)(["\n  mutation SetDarkDieStatus($targets: [Int]!) {\n    setDarkDieStatus(targets: $targets)\n  }\n"]);return ge=function(){return e},e}var pe=Object(C.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:750},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}})),Ee=Object(u.a)(ge()),he=(Object(u.a)(be()),Object(u.a)(fe())),ve=Object(u.a)(se());function Oe(e){var a=pe(),t=Object(n.useState)(new Set),i=Object(c.a)(t,2),l=i[0],o=i[1],u=Object(b.a)(Ee),d=Object(c.a)(u,1)[0],s=Object(b.a)(he),f=Object(c.a)(s,1)[0],g=Object(b.a)(ve),p=Object(c.a)(g,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{display:"flex"},r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:function(){d({variables:{targets:Object(V.a)(l)}})}},"\u78ba\u8a8d\u6b7b\u4ea1")),r.a.createElement(L.a,{component:G.a},r.a.createElement(B.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(U.a,null,r.a.createElement(M.a,null,r.a.createElement(F.a,null,"\u8b66\u9577"),r.a.createElement(F.a,null,"\u6b7b\u4ea1"),r.a.createElement(F.a,null,"\u653e\u9010\u52a0\u6b0a"),r.a.createElement(F.a,null,"ID"),r.a.createElement(F.a,{align:"left"},"\u73a9\u5bb6"),r.a.createElement(F.a,{align:"right"},"\u89d2\u8272"),r.a.createElement(F.a,{align:"right"},"\u6295\u7968"),r.a.createElement(F.a,{align:"center"},"\u8b66\u9577"),r.a.createElement(F.a,{align:"center"},"\u653e\u9010"),r.a.createElement(F.a,{align:"right"},"\u4e0a\u7dda"))),r.a.createElement(z.a,null,e.data.map((function(a){return r.a.createElement(M.a,{key:a.id},r.a.createElement(F.a,null,r.a.createElement(P.a,{disabled:!0,onChange:function(e){f({variables:{id:a.id}})},checked:a.id===e.chiefId,color:"primary",inputProps:{"aria-label":"secondary checkbox"}})),r.a.createElement(F.a,null,a.id?r.a.createElement(P.a,{onChange:function(e){var t=new Set(l);l.has(a.id)?t.delete(a.id):t.add(a.id),o(t)},checked:a.isDie||l.has(a.id),disabled:a.isDie,color:"primary",inputProps:{"aria-label":"secondary checkbox"}}):null),r.a.createElement(F.a,null,r.a.createElement(P.a,{onChange:function(e){p({variables:{id:a.id}})},checked:a.id===e.voteWeightedId,color:"primary",inputProps:{"aria-label":"secondary checkbox"}})),r.a.createElement(F.a,{component:"th",scope:"row"},a.id),r.a.createElement(F.a,{align:"right"},a.name),r.a.createElement(F.a,{align:"right"},a.roleName),r.a.createElement(F.a,{align:"right"},a.votedNumber),r.a.createElement(F.a,{align:"right"},a.chiefVote.toString()),r.a.createElement(F.a,{align:"right"},a.vote.toString()),r.a.createElement(F.a,{align:"right"},r.a.createElement("span",{style:{color:a.isEmpty?"gray":a.isVoteFinish?"lightgreen":"orange",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf")))}))))))}function je(){var e=Object(o.a)(["\n  {\n    roles {\n      id\n      name\n      number\n    }\n    players {\n      id\n      name\n      roleName\n      isEmpty\n    }\n  }\n"]);return je=function(){return e},e}Object(u.a)(je());var ye=Object(C.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}}));function Ce(e){var a=ye(),t=function(e){var a=0,t=[];return e.forEach((function(e){var n=e.number;n&&(a+=n,t.push(e))})),{total:a,data:t}}(e.data),n=t.total,i=t.data;return r.a.createElement(L.a,{component:G.a},r.a.createElement(B.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(U.a,null,r.a.createElement(M.a,null,r.a.createElement(F.a,null,"\u89d2\u8272"),r.a.createElement(F.a,{align:"right"},"\u4eba\u6578"))),r.a.createElement(z.a,null,i.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement(M.a,{key:e.name},r.a.createElement(F.a,{component:"th",scope:"row"},e.name),r.a.createElement(F.a,{align:"right"},e.number)),e.players?r.a.createElement(M.a,{align:"left"},e.players.map((function(e,a){return r.a.createElement("div",{style:{fontSize:22,marginLeft:45},key:a},"".concat(e.id," : ").concat(e.name))}))):null)})),r.a.createElement(M.a,null,r.a.createElement(F.a,{align:"right"},"\u7e3d\u4eba\u6578"),r.a.createElement(F.a,{align:"right"},n)))))}function Se(e){return r.a.createElement(Ce,{data:e.data})}var ke=t(420),Ie=t(405),xe=t(402),$e=t(69),we=t.n($e),De=t(267),Ve=t.n(De),Te=t(266),We=t.n(Te),Pe=t(401),Ne=t(418),Re=t(79),Be=t.n(Re);function ze(){var e=Object(o.a)(["\n  {\n    roles {\n      id\n      name\n      \n    }\n    \n  }\n"]);return ze=function(){return e},e}var Fe=Object(u.a)(ze()),Le=Object(C.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:250},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}}));function Ue(e){var a,t=Le(),n=r.a.useState(-1),i=Object(c.a)(n,2),l=i[0],o=i[1],m=r.a.useState(0),u=Object(c.a)(m,2),d=u[0],s=u[1],f=Object(Pe.a)(Fe),b=f.loading,g=(f.error,f.data);return b?r.a.createElement("div",null,"Loading"):(console.log(g),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(Ne.a,{id:"combo-box-demo",options:g.roles.filter((function(e){return e.id>0})),getOptionLabel:function(e){return e.name},style:{width:300},onChange:function(e,a){o(a.id)},renderInput:function(e){return r.a.createElement(R.a,Object.assign({},e,{label:"\u89d2\u8272",variant:"outlined",margin:"dense"}))}}),r.a.createElement(R.a,{id:"standard-basic",label:"\u4eba\u6578",variant:"outlined",className:t.margin,margin:"dense",type:"number",value:d,onChange:function(e){return s(e.target.value)}}),r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(xe.a,(a={size:"medium",color:"secondary","aria-label":"add"},Object(D.a)(a,"size","small"),Object(D.a)(a,"onClick",(function(){e.updateRoleNumber({id:l,number:parseInt(d)})})),a),r.a.createElement(Be.a,null)))))}var Me=t(425),Ge=t(426),Ae="card",He={border:"1px dashed gray",padding:"0.5rem 1rem",marginBottom:".5rem",backgroundColor:"white",cursor:"move"},qe=function(e){var a=e.id,t=e.text,i=e.index,l=e.moveCard,o=Object(n.useRef)(null),m=Object(Me.a)({accept:Ae,hover:function(e,a){if(o.current){var t=e.index,n=i;if(t!==n){var r=o.current.getBoundingClientRect(),c=(r.bottom-r.top)/2,m=a.getClientOffset().y-r.top;t<n&&m<c||t>n&&m>c||(l(t,n),e.index=n)}}}}),u=Object(c.a)(m,2)[1],d=Object(Ge.a)({item:{type:Ae,id:a,index:i},collect:function(e){return{isDragging:e.isDragging()}}}),s=Object(c.a)(d,2),f=s[0].isDragging?0:1;return(0,s[1])(u(o)),r.a.createElement("div",{ref:o,style:Object(T.a)({},He,{opacity:f})},t)},Je=t(265),Qe=t.n(Je),Ye={width:400},Ke=function(e){var a=Object(n.useState)(Object(V.a)(e.data)),t=Object(c.a)(a,2),i=t[0],l=t[1],o=Object(n.useCallback)((function(a,t){var n=i[a],r=Qe()(i,{$splice:[[a,1],[t,0,n]]});l(r),e.onUpdate(r)}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:Ye},i.map((function(e,a){return function(e,a){return r.a.createElement(qe,{key:e.id,index:a,id:e.id,text:e.text,moveCard:o})}(e,a)}))))},Xe=t(404),Ze=t(280);function _e(){var e=Object(o.a)(["\n  mutation UpdateRolePriority($name: String!, $ids: [Int]!) {\n    updateTemplateRolePriority(name: $name, ids: $ids)\n  }\n"]);return _e=function(){return e},e}function ea(){var e=Object(o.a)(["\n  mutation UpdateRule($name: String!, $description: String!) {\n    updateTemplateDescription(name: $name, description: $description)\n  }\n"]);return ea=function(){return e},e}function aa(){var e=Object(o.a)(["\n  mutation UpdateTempl($roleId: Int!, $number: Int!, $name: String!) {\n    updateTemplateRole(name: $name, number: $number, roleId: $roleId)\n  }\n"]);return aa=function(){return e},e}function ta(){var e=Object(o.a)(["\n  query GetTemplate($name: String!) {\n    template(name: $name) {\n      roles {\n        name\n        number\n        id\n      }\n      description\n    }\n  }\n"]);return ta=function(){return e},e}var na=Object(u.a)(ta()),ra=Object(u.a)(aa()),ia=Object(u.a)(ea()),la=Object(u.a)(_e());function ca(e){var a=e.children,t=e.value,n=e.index,i=Object(W.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},i),t===n&&r.a.createElement(I.a,{p:3},a))}var oa=function(e){var a=[];return e.forEach((function(e){var t=e.name,n=e.id;a.push({id:n,text:t})})),a};function ma(e){var a=e.name,t=r.a.useState([]),n=Object(c.a)(t,2),i=n[0],l=n[1],o=r.a.useState([]),m=Object(c.a)(o,2),u=m[0],d=m[1],s=r.a.useState(!1),f=Object(c.a)(s,2),p=(f[0],f[1],Object(g.a)(na,{fetchPolicy:"network-only"})),E=Object(c.a)(p,2),h=E[0],v=E[1],j=v.loading,y=(v.error,v.data),C=v.called;console.log(y);var S=Object(b.a)(la,{onCompleted:function(){console.log("update dark"),h({variables:{name:a}})}}),k=Object(c.a)(S,2),I=k[0];k[1];if(r.a.useEffect((function(){h({variables:{name:a}})}),[]),r.a.useEffect((function(){if(!j&&C){var e=oa(y.template.roles);l(e.map((function(e){return e.id}))),d(e.map((function(e){return e.id})))}}),[y]),!C||j)return r.a.createElement("div",null,"Loading");var x=oa(y.template.roles);return r.a.createElement(Xe.a,{backend:Ze.a},r.a.createElement(O.a,{"aria-label":"delete",onClick:function(){I({variables:{name:a,ids:i}})},color:u.toString()===i.toString()?"primary":"secondary"},r.a.createElement(Be.a,null)),r.a.createElement(Ke,{data:x,onUpdate:function(e){console.log("update view"),l(e.map((function(e){return e.id})))}}))}function ua(e){var a=e.name,t=e.data,n=Object(b.a)(ra),i=Object(c.a)(n,1)[0];return r.a.useEffect((function(){return console.log("mount"+a),function(){console.log("umount"+a)}}),[]),r.a.createElement("div",null,r.a.createElement(E.a,{variant:"h2",gutterBottom:!0},a),r.a.createElement(Ue,{updateRoleNumber:function(e){var t=e.id,n=e.number;console.log(t,a),i({variables:{roleId:t,name:a,number:n}})}}),r.a.createElement(Se,{data:t}))}function da(e){var a=r.a.useState(e.value),t=Object(c.a)(a,2),n=t[0],i=t[1];return r.a.createElement("div",null,r.a.createElement(O.a,{"aria-label":"delete",onClick:function(){e.updateRule({variables:{description:n,name:e.name}})},color:n===e.value?"primary":"secondary"},r.a.createElement(Be.a,null)),r.a.createElement(R.a,{id:"outlined-multiline-static",multiline:!0,rows:4,fullWidth:!0,value:n,variant:"outlined",onChange:function(e){return i(e.target.value)}}))}function sa(e){var a=e.name,t=Object(Pe.a)(na,{variables:{name:a}}),n=t.loading,i=(t.error,t.data),l=t.refetch,o=Object(b.a)(ia,{onCompleted:function(){l()}}),m=Object(c.a)(o,2),u=m[0];m[1];return n?r.a.createElement("div",null,"Loading"):r.a.createElement(da,{value:i.template.description,updateRule:u,name:a})}function fa(e){var a=e.name,t=e.data,n=r.a.useState(0),i=Object(c.a)(n,2),l=i[0],o=i[1];return r.a.createElement(G.a,{square:!0},r.a.createElement(ke.a,{value:l,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){o(a)},"aria-label":"disabled tabs example"},r.a.createElement(Ie.a,{label:"\u89d2\u8272"}),r.a.createElement(Ie.a,{label:"\u898f\u5247"}),r.a.createElement(Ie.a,{label:"\u9ed1\u591c\u9806\u5e8f"})),r.a.createElement(ca,{value:l,index:0},r.a.createElement(ua,{name:a,data:t})),r.a.createElement(ca,{value:l,index:1},r.a.createElement(sa,{name:a})),r.a.createElement(ca,{value:l,index:2},r.a.createElement(ma,{name:a})))}function ba(){var e=Object(o.a)(["\n  mutation EnableTemplate($name: String!) {\n    enableTemplate(name: $name)\n  }\n"]);return ba=function(){return e},e}function ga(){var e=Object(o.a)(["\n  mutation DeleteTemplate($name: String!) {\n    deleteTemplate(name: $name)\n  }\n"]);return ga=function(){return e},e}function pa(){var e=Object(o.a)(["\n  mutation addTemplate($name: String!) {\n    addNewTemplate(name: $name)\n  }\n"]);return pa=function(){return e},e}function Ea(){var e=Object(o.a)(["\n  {\n    templates {\n      isEnabled\n      name\n    }\n  }\n"]);return Ea=function(){return e},e}var ha=Object(C.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:250},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}})),va=(Object(u.a)(Ea()),Object(u.a)(pa())),Oa=Object(u.a)(ga()),ja=Object(u.a)(ba());function ya(e){var a=ha();return r.a.createElement(L.a,{component:G.a},r.a.createElement(B.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(U.a,null,r.a.createElement(M.a,null,r.a.createElement(F.a,null,"\u9078\u64c7"),r.a.createElement(F.a,{align:"left"},"\u904a\u6232\u6a21\u5f0f"),r.a.createElement(F.a,{align:"right"},r.a.createElement("div",{style:{marginRight:10}},"\u7de8\u8f2f")),r.a.createElement(F.a,{align:"right"},r.a.createElement("div",{style:{marginRight:10}},"\u522a\u9664")))),r.a.createElement(z.a,null,e.data.map((function(a){return r.a.createElement(M.a,{key:a.name},r.a.createElement(F.a,null,r.a.createElement(P.a,{onChange:function(t){t.target.checked&&e.onSelect(a.name)},color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:a.isEnabled})),r.a.createElement(F.a,{align:"left"},a.name),r.a.createElement(F.a,{align:"right"},r.a.createElement(O.a,{"aria-label":"delete",onClick:function(){console.log(a.name),e.onEdit(a.name)},disabled:!a.isEnabled},r.a.createElement(We.a,null))),r.a.createElement(F.a,{align:"right"},r.a.createElement(O.a,{"aria-label":"delete",onClick:function(){e.onDelete(a.name)},disabled:a.isEnabled},r.a.createElement(Ve.a,null))))})))))}function Ca(e){var a,t=ha(),n=Object(b.a)(va),i=Object(c.a)(n,1)[0],l=Object(b.a)(Oa),o=Object(c.a)(l,1)[0],m=r.a.useState(""),u=Object(c.a)(m,2),d=u[0],s=u[1],f=r.a.useState(!1),g=Object(c.a)(f,2),p=(g[0],g[1],Object(b.a)(ja,{onCompleted:function(){}})),E=Object(c.a)(p,2),h=E[0];E[1];return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(R.a,{id:"standard-basic",label:"\u6a21\u5f0f\u540d\u7a31",variant:"outlined",className:t.margin,margin:"dense",value:d,onChange:function(e){return s(e.target.value)}}),r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(xe.a,(a={size:"medium",color:"secondary","aria-label":"add"},Object(D.a)(a,"size","small"),Object(D.a)(a,"onClick",(function(){i({variables:{name:d}})})),a),r.a.createElement(we.a,null)))),r.a.createElement(S.a,{maxWidth:"sm"},r.a.createElement(ya,{data:e.data.templates,onEdit:function(a){e.setEditName(a)},onSelect:function(e){h({variables:{name:e}})},onDelete:function(e){o({variables:{name:e}})}})))}function Sa(e){ha();var a=r.a.useState(""),t=Object(c.a)(a,2),n=(t[0],t[1],r.a.useState("")),i=Object(c.a)(n,2),l=i[0],o=i[1],u=Object(b.a)(va),d=(Object(c.a)(u,1)[0],Object(b.a)(Oa)),s=(Object(c.a)(d,1)[0],r.a.useState(!1)),f=Object(c.a)(s,2);f[0],f[1];return console.log(),l?r.a.createElement("div",null,r.a.createElement(I.a,{display:"flex"},r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:function(){o("")}},"\u9000\u51fa")),r.a.createElement(fa,{name:l,data:e.data})):r.a.createElement(Ca,{setEditName:function(e){o(e)},data:e.tData})}function ka(){var e=Object(o.a)(["\n  {\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n  }\n"]);return ka=function(){return e},e}Object(u.a)(ka());function Ia(e){var a=e.data.enabledTemplate,t=a.name,n=a.description,i=a.roles;return r.a.createElement("div",null,r.a.createElement(E.a,{variant:"h2",gutterBottom:!0},t),r.a.createElement(R.a,{id:"outlined-multiline-static",multiline:!0,rows:6,fullWidth:!0,value:n||"",variant:"outlined",label:"\u898f\u5247",disabled:!0}),r.a.createElement(Ce,{data:i}))}var xa=t(122),$a=t(407),wa=t(421),Da=t(406);function Va(){var e=Object(o.a)(["\n  mutation VoteChiefStart {\n    voteChiefStart\n  }\n"]);return Va=function(){return e},e}function Ta(){var e=Object(o.a)(["\n  mutation VoteStart($targets: [Int]) {\n    voteStart(targets: $targets)\n  }\n"]);return Ta=function(){return e},e}function Wa(){var e=Object(o.a)(["\n  mutation RemoveAllPlayer {\n    removeAllPlayer\n  }\n"]);return Wa=function(){return e},e}function Pa(){var e=Object(o.a)(["\n  mutation GenerateTemplatePlayer {\n    generateTemplatePlayer\n  }\n"]);return Pa=function(){return e},e}function Na(){var e=Object(o.a)(["\n  mutation GenerateTemplateRole($isCovertWolfToHuman: Boolean!) {\n    generateTemplateRole(isCovertWolfToHuman: $isCovertWolfToHuman)\n  }\n"]);return Na=function(){return e},e}function Ra(){var e=Object(o.a)(["\n  mutation UpdatePlayerName($id: Int!, $name: String!) {\n    updatePlayerName(id: $id, name: $name)\n  }\n"]);return Ra=function(){return e},e}function Ba(){var e=Object(o.a)(["\n  {\n    templates {\n      isEnabled\n      name\n    }\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n    players {\n      pass\n      isTarget\n      id\n      name\n      roleName\n      vote\n      chiefVote\n      isEmpty\n      isDie\n      isVoteFinish\n      votedNumber\n      chiefVoteState {\n        isDropedOut\n        isCandidate\n        type\n      }\n    }\n    gameInfo(id: 0) {\n      isVoteFinish\n      chiefId\n      isDark\n      voteWeightedId\n      hasVoteTarget\n      hasChief\n    }\n  }\n"]);return Ba=function(){return e},e}var za=Object(u.a)(Ba()),Fa=Object(u.a)(Ra()),La=Object(u.a)(Na()),Ua=Object(u.a)(Pa()),Ma=Object(u.a)(Wa()),Ga=Object(u.a)(Ta()),Aa=Object(u.a)(Va()),Ha=Object(C.a)((function(e){return{margin:{margin:e.spacing(1)},table:{minWidth:250},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}}));function qa(e){var a=e.children,t=e.value,n=e.index,i=Object(W.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},i),t===n&&r.a.createElement(I.a,{p:3},a))}var Ja=function(e){var a={};e.players.forEach((function(e){var t=e.roleName,n=e.name,r=e.id;a[t]?a[t].push({name:n||"",id:r}):a[t]=[{name:n||"",id:r}]}));var t=[];return e.enabledTemplate.roles.forEach((function(e){var n=e.name;t.push(Object(T.a)({},e,{players:a[n]}))})),t};function Qa(e){return r.a.createElement(Se,{data:e.data})}function Ya(e){var a=r.a.useState([]),t=Object(c.a)(a,2),n=t[0],i=t[1],l=Object(b.a)(e.hasChief||e.hasVoteTarget?Ga:Aa,{onCompleted:function(){e.onClose()}}),o=Object(c.a)(l,1)[0],u=e.hasTarget||e.hasChief;return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,null,r.a.createElement(Da.a,{id:"alert-dialog-slide-description"},"".concat(e.hasChief?"\u8acb\u9078\u64c7\u653e\u9010\u7684\u76ee\u6a19":"\u8acb\u9078\u64c7\u8b66\u9577\u5019\u9078\u4eba",", \u76ee\u6a19\u5fc5\u9808\u591a\u65bc\u4e00\u4eba, \u6295\u7968\u4eba\u6578\u4e5f\u5fc5\u9808\u591a\u65bc\u4e00\u4eba")),e.players.filter((function(a){return e.hasVoteTarget?a.isTarget:e.hasChief?!a.isDie&&0!==a.id:a.chiefVoteState.isCandidate&&!a.chiefVoteState.isDropedOut})).map((function(a){return r.a.createElement("div",{key:a.id},r.a.createElement(wa.a,{checked:n.includes(a.id),name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){n.includes(a.id)||n.length+1===e.players.filter((function(e){return!e.isDie&&0!==e.id})).length||i([].concat(Object(V.a)(n),[a.id]))}})," ".concat(a.id," : ").concat(a.name||""))})),r.a.createElement(wa.a,{checked:0===n.length,name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){u||i([])}}),"\u6240\u6709\u4eba"),r.a.createElement(K.a,null,(0===n.length||n.length>1)&&r.a.createElement(m.a,{onClick:function(){o({variables:{targets:n}})},color:"primary"},"\u78ba\u8a8d")))}function Ka(e){Ha();var a=Object(b.a)(La),t=Object(c.a)(a,1)[0],n=Object(b.a)(Ua),i=Object(c.a)(n,1)[0],l=Object(b.a)(Ma),o=Object(c.a)(l,1)[0],u=Object(b.a)(Ga),d=(Object(c.a)(u,1)[0],r.a.useState(!1)),s=Object(c.a)(d,2),f=s[0],g=s[1],p=Object(xa.a)(e.name,500),E=Object(c.a)(p,2),h=E[0],v=E[1],O=r.a.useState(e.name||""),j=Object(c.a)(O,2),y=j[0],C=j[1],S=Object(b.a)(Fa),k=Object(c.a)(S,2),x=k[0],$=k[1].called,w=r.a.useState({isCovertWolfToHuman:!1}),V=Object(c.a)(w,2),W=V[0],B=V[1];r.a.useEffect((function(){h&&(h!==e.name||$)&&x({variables:{id:0,name:h}})}),[h]);var z=-1!==e.chiefId;return e.isPlayerMode?e.isDark?r.a.createElement(Oe,{data:e.players,chiefId:e.chiefId,voteWeightedId:e.voteWeightedId}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"simple-dialog-title",open:f,onClose:function(){g(!1)}},r.a.createElement($a.a,{id:"form-dialog-title"},z?"\u653e\u9010\u958b\u59cb":"\u7af6\u9078\u8b66\u9577"),r.a.createElement(Ya,{players:e.players,onClose:function(){g(!1)},hasChief:z,hasVoteTarget:e.hasVoteTarget})),r.a.createElement(I.a,{display:"flex"},r.a.createElement(m.a,{variant:"outlined",color:"primary",onClick:function(){t({variables:{isCovertWolfToHuman:W.isCovertWolfToHuman}})}},r.a.createElement("div",{style:{fontWeight:800}},"\u7522\u751f\u89d2\u8272")),r.a.createElement(m.a,{variant:"outlined",color:"secondary",onClick:function(){o()}},r.a.createElement("div",{style:{fontWeight:800}},"\u522a\u9664\u73a9\u5bb6")),r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:function(){g(!0)}},z?"\u653e\u9010":"\u8b66\u9577")),r.a.createElement(I.a,{display:"flex"},r.a.createElement(N.a,{control:r.a.createElement(P.a,{checked:W.isCovertWolfToHuman,onChange:function(e){B(Object(T.a)({},W,Object(D.a)({},e.target.name,e.target.checked)))},name:"isCovertWolfToHuman"}),label:"\u8f49\u5316\u72fc\u4eba\u8b8a\u6210\u4eba\u985e"})),r.a.createElement(I.a,{display:"flex"},r.a.createElement(R.a,{id:"standard-basic",label:"\u59d3\u540d",variant:"outlined",margin:"dense",value:y,onChange:function(e){v(e.target.value),C(e.target.value)}})),r.a.createElement(de,{data:e.players,chiefId:e.chiefId,voteWeightedId:e.voteWeightedId})):r.a.createElement("div",{style:{}},r.a.createElement(I.a,{display:"flex"},r.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){i()}},"\u52a0\u5165\u73a9\u5bb6")),r.a.createElement(Ia,{data:e.data}))}function Xa(e){var a=Object(x.f)(),t=r.a.useState(0),i=Object(c.a)(t,2),l=i[0],o=i[1],m=Object(g.a)(za,{fetchPolicy:"network-only"}),u=Object(c.a)(m,2),d=u[0],s=u[1],f=s.loading,b=s.data,p=s.error,E=s.called,h=!0;if(Object(n.useEffect)((function(){h&&d();var e=setInterval((function(){h&&d()}),500);return function(){clearInterval(e),h=!1}}),[]),r.a.useEffect((function(){p&&!f&&(p.graphQLErrors.forEach((function(e){"UNAUTHENTICATED"===e.extensions.code&&(console.log("no access!!!"),a.push("/"))})),console.log("set dark"),b&&b.gameInfo.isDark&&e.setDarkMode(!0))}),[p,f,b]),r.a.useEffect((function(){b&&e.setDarkMode(b.gameInfo.isDark)}),[b]),!E||!b)return r.a.createElement("div",null,"Loading");var v=e.id,O=e.pass,j=e.name,y=b.players.length>1;return console.log(b),r.a.createElement(S.a,{maxWidth:y&&0===l?"lg":"sm"},r.a.createElement(G.a,{elevation:3},r.a.createElement(ke.a,{value:l,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){o(a)},"aria-label":"disabled tabs example",variant:"fullWidth"},r.a.createElement(Ie.a,{label:"\u904a\u6232"}),r.a.createElement(Ie.a,{label:y?"\u9ed1\u591c\u8996\u91ce":"\u6a21\u5f0f\u9078\u64c7"}),y&&r.a.createElement(Ie.a,{label:"\u6a21\u5f0f"})),r.a.createElement(qa,{value:l,index:0},r.a.createElement(Ka,{isPlayerMode:y,id:v,pass:O,name:j,players:b.players,chiefId:b.gameInfo.chiefId,isDark:b.gameInfo.isDark,voteWeightedId:b.gameInfo.voteWeightedId,data:b})),r.a.createElement(qa,{value:l,index:1},y?r.a.createElement(Qa,{data:Ja(b)}):r.a.createElement(Sa,{data:Ja(b),tData:b})),y&&r.a.createElement(qa,{value:l,index:2},r.a.createElement(Ia,{data:b}))))}var Za=t(268),_a=t.n(Za),et=t(409),at=t(410);function tt(){var e=Object(o.a)(["\n  {\n    enabledTemplate {\n      name\n      description\n      roles {\n        name\n        id\n        number\n      }\n    }\n  }\n"]);return tt=function(){return e},e}function nt(){var e=Object(o.a)(["\n  mutation dropOutChiefCandidate {\n    setIsChiefDropOut\n  }\n"]);return nt=function(){return e},e}function rt(){var e=Object(o.a)(["\n  mutation setIsVoter {\n    setIsVoter\n  }\n"]);return rt=function(){return e},e}function it(){var e=Object(o.a)(["\n  mutation submitChiefCandidate {\n    setIsChiefCandidate\n  }\n"]);return it=function(){return e},e}function lt(){var e=Object(o.a)(["\n  mutation UpdatePlayerName($id: Int!, $name: String!) {\n    updatePlayerName(id: $id, name: $name)\n  }\n"]);return lt=function(){return e},e}function ct(){var e=Object(o.a)(["\n  mutation SubmitVote($target: Int!) {\n    submitVote(target: $target)\n  }\n"]);return ct=function(){return e},e}function ot(){var e=Object(o.a)(["\n  query GetPlayer($id: Int!, $pass: String!) {\n    player(id: $id, pass: $pass) {\n      id\n      name\n      roleName\n    }\n    players(id: $id) {\n      id\n      name\n      isEmpty\n      revealedRole\n      isDie\n      vote\n      chiefVote\n      isValidCandidate\n      isVoteFinish\n      chiefVoteState {\n        type\n      }\n    }\n   \n    gameInfo(id: $id) {\n      uuid\n      isVoteFinish\n      chiefId\n      isDark\n      chiefVoteState {\n        isDropedOut\n        isCandidate\n        type\n      }\n    }\n    \n  }\n"]);return ot=function(){return e},e}var mt=Object(C.a)((function(e){return{margin:{},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},submit:{margin:e.spacing(3,0,2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),ut=Object(u.a)(ot()),dt=Object(u.a)(ct()),st=Object(u.a)(lt()),ft=Object(u.a)(it()),bt=Object(u.a)(rt()),gt=Object(u.a)(nt()),pt=Object(u.a)(tt());function Et(e){var a=e.children,t=e.value,n=e.index,i=Object(W.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},i),t===n&&r.a.createElement(I.a,{p:3},a))}function ht(e){var a=mt();return console.log(e.data),r.a.createElement(L.a,{component:G.a},r.a.createElement(B.a,{className:a.table,"aria-label":"simple table",size:"small"},r.a.createElement(U.a,null,r.a.createElement(M.a,null,r.a.createElement(F.a,null,"ID"),r.a.createElement(F.a,{align:"center"},"\u73a9\u5bb6"),r.a.createElement(F.a,{align:"center"},"\u8b66\u9577"),r.a.createElement(F.a,{align:"center"},"\u653e\u9010"),r.a.createElement(F.a,{align:"right"},"\u72c0\u614b"))),r.a.createElement(z.a,null,e.data.map((function(a){return r.a.createElement(M.a,{key:a.id},r.a.createElement(F.a,{component:"th",scope:"row"},0===a.id?r.a.createElement("div",{style:{width:30}},r.a.createElement($.a,{src:"infinity.svg"})):a.isDie?r.a.createElement("span",{"aria-label":"paw",style:{fontSize:30}},"\ud83d\udc3e"):r.a.createElement("span",{"aria-label":"paw",style:{fontSize:30}},a.id),a.id===e.chiefId&&0!==a.id&&r.a.createElement("span",{"aria-label":"paw",style:{fontSize:30}},"\ud83c\udf1f"),a.chiefVoteState&&a.chiefVoteState.type&&"chief"==a.chiefVoteState.type&&r.a.createElement("span",{span:!0,"aria-label":"paw",style:{fontSize:30,marginLeft:5}},"\ud83d\uddf3\ufe0f"),a.chiefVoteState&&a.chiefVoteState.type&&"drop"==a.chiefVoteState.type&&r.a.createElement("span",{span:!0,"aria-label":"paw",style:{fontSize:30,marginLeft:5}},"\ud83d\udeab")),r.a.createElement(F.a,{align:"center"},a.name),r.a.createElement(F.a,{align:"right"},a.chiefVote.toString()),r.a.createElement(F.a,{align:"right"},a.vote.toString()),r.a.createElement(F.a,{align:"right"},r.a.createElement("span",{style:{color:a.isEmpty?"gray":a.isVoteFinish?"lightgreen":"orange",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf")))})))))}function vt(e){var a=r.a.useState(-1),t=Object(c.a)(a,2),n=t[0],i=t[1],l=Object(b.a)(dt),o=Object(c.a)(l,2),u=o[0];o[1].called;return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,null,e.players.filter((function(e){return e.isValidCandidate})).map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(wa.a,{checked:e.id===n,name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){i(e.id)}})," ".concat(e.id," : ").concat(e.name||""))})),r.a.createElement(wa.a,{checked:-1===n,name:"radio-button-demo",inputProps:{"aria-label":"B"},onClick:function(){i(-1)}}),"\u68c4\u6b0a"),r.a.createElement(K.a,null,r.a.createElement(m.a,{onClick:function(){u({variables:{target:n}})},color:"primary"},"\u78ba\u8a8d")))}function Ot(e){var a=Object(b.a)(bt,{onCompleted:function(){e.onClose()}}),t=Object(c.a)(a,1)[0],n=Object(b.a)(ft,{onCompleted:function(){e.onClose()}}),i=Object(c.a)(n,1)[0],l=Object(b.a)(gt,{onCompleted:function(){e.onClose()}}),o=Object(c.a)(l,1)[0];return r.a.createElement(r.a.Fragment,null,e.isCandidate?r.a.createElement($a.a,{id:"form-dialog-title"},"\u662f\u5426\u9000\u6c34\uff1f"):r.a.createElement($a.a,{id:"form-dialog-title"},"\u662f\u5426\u7af6\u9078\u8b66\u9577\uff1f"),r.a.createElement(X.a,null,r.a.createElement(K.a,null,r.a.createElement(m.a,{onClick:function(){e.isCandidate?o():i()},color:"primary"},"\u78ba\u8a8d"),!e.isCandidate&&r.a.createElement(m.a,{onClick:function(){t()},style:{color:"DarkOrange"}},"\u4e0d\u8981!"),r.a.createElement(m.a,{onClick:function(){e.onClose()},color:"secondary"},"\u53d6\u6d88"))))}function jt(e){var a=mt(),t=Object(x.f)(),i=Object(g.a)(ut,{fetchPolicy:"network-only"}),l=Object(c.a)(i,2),o=l[0],u=l[1],d=u.loading,s=u.error,f=u.data,p=u.called,h=r.a.useState(!1),v=Object(c.a)(h,2),O=v[0],j=v[1],y=Object(xa.a)(e.name,500),C=Object(c.a)(y,2),S=C[0],k=C[1],$=r.a.useState(e.name),w=Object(c.a)($,2),D=w[0],V=w[1],T=Object(b.a)(st),W=Object(c.a)(T,2),P=W[0],N=W[1].called,B=!0;Object(n.useEffect)((function(){B&&o({variables:{id:e.id,pass:e.pass}});var a=setInterval((function(){B&&o({variables:{id:e.id,pass:e.pass}})}),500);return function(){clearInterval(a),B=!1}}),[]),r.a.useEffect((function(){S&&(S!==e.name||N)&&P({variables:{id:e.id,name:S}}),s&&!d&&t.push("/")}),[S,s,d]),r.a.useEffect((function(){f&&e.setDarkMode(f.gameInfo.isDark)}),[f]);var z=r.a.useState(""),F=Object(c.a)(z,2),L=F[0],U=F[1],M=f?f.gameInfo.uuid:"",G=f?f.player.roleName:"";if(r.a.useEffect((function(){return U(""),f&&(console.log(f),setTimeout((function(){U(f.player.roleName)}),1e3)),function(){U("")}}),[M,G]),!p||!f)return r.a.createElement("div",null,"Loading");var A=-1!==f.gameInfo.chiefId,H=f.player,q=H.id;H.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"simple-dialog-title",open:!f.gameInfo.isVoteFinish},r.a.createElement($a.a,{id:"form-dialog-title"},A?"\u653e\u9010\u73a9\u5bb6":"\u9078\u64c7\u8b66\u9577"),r.a.createElement(vt,{players:f.players,id:q})),!A&&r.a.createElement(I.a,{display:"flex"},f.gameInfo.chiefVoteState?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"simple-dialog-title",open:O},r.a.createElement(Ot,{onClose:function(){j(!1)},isCandidate:f.gameInfo.chiefVoteState.isCandidate})),f.gameInfo.chiefVoteState.isCandidate?r.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){j(!0)},disabled:f.gameInfo.chiefVoteState.isDropedOut},"\u9000\u6c34"):r.a.createElement(m.a,{variant:"outlined",color:"primary",onClick:function(){j(!0)},disabled:null!==f.gameInfo.chiefVoteState.type,style:{border:"2px solid",fontWeight:800}},"\u4e0a\u8b66")):null),r.a.createElement(I.a,{display:"flex"},r.a.createElement(R.a,{id:"standard-basic",label:"\u59d3\u540d",variant:"outlined",className:a.margin,margin:"dense",value:D,onChange:function(e){k(e.target.value),V(e.target.value)}})),r.a.createElement(et.a,{className:a.root},r.a.createElement(at.a,null,r.a.createElement(_a.a,{isFlipped:!!L,flipDirection:"vertical"},r.a.createElement(E.a,{variant:"h1",component:"h1"},"\u2754"),r.a.createElement(E.a,{variant:"h2",component:"h2"},L||"\u2754")))),r.a.createElement(ht,{data:f.players,chiefId:f.gameInfo.chiefId}))}function yt(){var e=Object(Pe.a)(pt,{fetchPolicy:"network-only"}),a=e.loading,t=(e.error,e.data);return a?r.a.createElement("div",null,"Loading"):r.a.createElement(Ia,{data:t})}function Ct(e){var a=e.id,t=e.pass,n=e.name,i=r.a.useState(0),l=Object(c.a)(i,2),o=l[0],m=l[1];return r.a.createElement(S.a,{maxWidth:"sm"},r.a.createElement(G.a,{elevation:3},r.a.createElement(ke.a,{value:o,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){m(a)},"aria-label":"disabled tabs example",variant:"fullWidth"},r.a.createElement(Ie.a,{label:"\u73a9\u5bb6"}),r.a.createElement(Ie.a,{label:"\u6a21\u5f0f"})),r.a.createElement(Et,{value:o,index:0},r.a.createElement(jt,{id:a,pass:t,name:n,setDarkMode:e.setDarkMode})),r.a.createElement(Et,{value:o,index:1},r.a.createElement(yt,null))))}var St=t(146),kt=t(204);function It(){var e=Object(o.a)(["\n  mutation UpdatePlayerPass($id: Int!, $pass: String!) {\n    updatePlayerPass(id: $id, pass: $pass) {\n      isValid\n      id\n    }\n  }\n"]);return It=function(){return e},e}function xt(){var e=Object(o.a)(["\n  {\n    players {\n      id\n      name\n      isEmpty\n    }\n  }\n"]);return xt=function(){return e},e}var $t=Object(C.a)((function(e){return{margin:{},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},submit:{margin:e.spacing(3,0,2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),wt=Object(u.a)(xt()),Dt=Object(u.a)(It());function Vt(e){return r.a.createElement("svg",{viewBox:"0 0 24 24",style:{width:"1.5rem",fill:"white"}},r.a.createElement("path",{d:e.path}))}function Tt(){var e=Object(x.f)(),a=$t(),t=r.a.useState(-1),n=Object(c.a)(t,2),i=n[0],l=n[1],o=r.a.useState(""),u=Object(c.a)(o,2),d=u[0],s=u[1],f=r.a.useState(!1),g=Object(c.a)(f,2),p=(g[0],g[1],Object(Pe.a)(wt,{})),E=p.loading,h=(p.error,p.data),v=p.stopPolling,O=p.startPolling;console.log(kt.a);var j=Object(b.a)(Dt,{onCompleted:function(a){a.updatePlayerPass.isValid&&e.push("/game")}}),y=Object(c.a)(j,2),C=y[0],k=y[1];k.loading,k.data;return r.a.useEffect((function(){return O(500),function(){v()}}),[]),E?r.a.createElement("div",null,"Loading"):r.a.createElement(S.a,{component:"main"},r.a.createElement("div",{style:{width:350,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement(St.a,{src:"test-3.png",size:"350"}),r.a.createElement(Ne.a,{fullWidth:!0,id:"combo-box-demo",className:a.margin,options:h.players,getOptionLabel:function(e){return"\u73a9\u5bb6 ".concat(e.id)},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{color:e.isEmpty?"gray":"lightgreen",transition:"all .3s ease",fontSize:"24px",marginRight:"10px"}},"\u25cf")," \u73a9\u5bb6 ".concat(e.id))},onChange:function(e,a){l(a.id)},renderInput:function(e){return r.a.createElement(R.a,Object.assign({},e,{label:"\u73a9\u5bb6",variant:"outlined",margin:"dense"}))}}),r.a.createElement(R.a,{fullWidth:!0,id:"standard-basic",label:"\u5bc6\u78bc",variant:"outlined",className:a.margin,margin:"dense",onChange:function(e){return s(e.target.value)},value:d}),r.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:function(){C({variables:{id:i,pass:d}})}},r.a.createElement(Vt,{path:kt.a}))))}var Wt=t(95),Pt=t(414);function Nt(){var e=Object(o.a)(["\n  mutation UpdatePlayerPass($id: Int!, $pass: String!) {\n    updatePlayerPass(id: $id, pass: $pass) {\n      isValid\n      name\n    }\n  }\n"]);return Nt=function(){return e},e}function Rt(){var e=Object(o.a)(["\n  mutation Logoff {\n    logoff\n  }\n"]);return Rt=function(){return e},e}function Bt(){var e=Object(o.a)(["\n  {\n    players {\n      id\n      name\n      isEmpty\n    }\n    login {\n      id\n      isValid\n    }\n  }\n"]);return Bt=function(){return e},e}var zt=new d.a({cache:new s.a,link:new f.a({uri:"/graphql"})}),Ft=new d.a({cache:new s.a,link:new f.a({uri:"/auth"})}),Lt=Object(C.a)((function(e){return{margin:{},table:{minWidth:450},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},submit:{margin:e.spacing(3,0,2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),Ut=Object(u.a)(Bt()),Mt=Object(u.a)(Rt());Object(u.a)(Nt());function Gt(){return r.a.createElement(E.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear())}function At(){var e=Object(x.f)(),a=Object(b.a)(Mt,{onCompleted:function(){e.push("/")}}),t=Object(c.a)(a,1)[0];return r.a.createElement(m.a,{variant:"outlined",color:"secondary",onClick:function(){t()}},"\u9000\u51fa")}function Ht(e){var a=Object(x.f)(),t=Object(g.a)(Ut,{fetchPolicy:"network-only"}),i=Object(c.a)(t,2),l=i[0],o=i[1],m=o.loading,u=o.error,d=o.data,s=Lt(),f=!0;if(Object(n.useEffect)((function(){return f&&l(),function(){f=!1}}),[]),r.a.useEffect((function(){u&&u.graphQLErrors.forEach((function(e){"UNAUTHENTICATED"===e.extensions.code&&a.push("/")}))}),[u]),m||!d)return r.a.createElement("div",null,"Loading");console.log(d,m);var b=d.login.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement(h.a,{position:"absolute"},r.a.createElement(v.a,null,r.a.createElement(O.a,{edge:"start",className:s.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(y.a,null)),r.a.createElement(E.a,{variant:"h6",className:s.title},r.a.createElement("div",{style:{width:50,margin:"auto",marginTop:10}},r.a.createElement($.a,{src:"wolf.svg"}))),r.a.createElement(At,null))),r.a.createElement("div",{style:{marginTop:100}},0===b?r.a.createElement(S.a,{maxWidth:0===b?"md":"sm"},r.a.createElement(Xa,{id:b,pass:"",name:"",setDarkMode:e.setDarkMode})):r.a.createElement(Ct,{id:b,pass:"",name:"",setDarkMode:e.setDarkMode})),r.a.createElement(I.a,{pt:4},r.a.createElement(Gt,null)))}var qt=function(){var e=r.a.useState(!1),a=Object(c.a)(e,2),t=a[0],n=a[1],i=r.a.useMemo((function(){return Object(w.a)({palette:{type:t?"dark":"light",primary:{main:"#F8A9A0"}}})}),[t]);return r.a.createElement("div",{className:"App"},r.a.createElement(Pt.a,{theme:i},r.a.createElement(Wt.a,null,r.a.createElement(x.c,null,r.a.createElement(x.a,{exact:!0,path:"/"},r.a.createElement(p.a,{client:Ft},r.a.createElement(Tt,null))),r.a.createElement(x.a,{exact:!0,path:"/game"},r.a.createElement(p.a,{client:zt},r.a.createElement(Ht,{setDarkMode:n})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(qt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[302,1,2]]]);
//# sourceMappingURL=main.4b8d521d.chunk.js.map